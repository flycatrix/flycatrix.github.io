<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>xco1a&#39;s b10g</title>
  <meta name="author" content="xcola">

  
  <meta name="description" content="做有态度的码农">
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="xco1a&#39;s b10g">

  
  

  
    <meta property="og:image" content="">
  

  
  <link href="/css/images/favicon.ico" rel="icon">
  

  <link rel="alternate" href="/atom.xml" title="xco1a&#39;s b10g" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  


  <!-- baidu webmaster push -->
  <script src="//push.zhanzhang.baidu.com/push.js"></script>

</head>
</html>

<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">xco1a&#39;s b10g</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-12-22T04:50:18.000Z"><a href="/2018/12/22/一点感想/">2018-12-22</a></time>
      
      
  
    <h1 class="title"><a href="/2018/12/22/一点感想/">一点感想</a></h1>
  

    </header>
    <div class="entry">
      
        <h3 id="1，考研"><a href="#1，考研" class="headerlink" title="1，考研"></a>1，考研</h3><p>今天是考研的日子，一年过去了。祝愿仍在考研的朋友们首战、二战告捷。</p>
<p>一直到上个月，还偶尔有过诸如“我要不要再考一次”的想法。现在已经完全不想再考了，如果说原因的话，可能那些考研和工作经验的权衡，考研的性价比都是借口，最本质的原因是我懒了，怕自己再也熬不住漫长枯燥的一年。考研赋予我的忍耐和自律，在今年使我受益良多，也帮我完成了汽车学生到程序员职工的转变。然而在我如愿成为了一个程序员以后，反而不如学习的时候那样自律高效，交给我的任务量少而且完成的很快，剩下大把的空闲时间令我无所适从。最终闲适消磨意志，懒惰侵蚀自律。我还是成了一条流水线上的咸鱼，饱食终日，无所事事。</p>
<h3 id="2，学习"><a href="#2，学习" class="headerlink" title="2，学习"></a>2，学习</h3><p>昨天周会，趁着收拾东西的几分钟跟柱哥聊了聊想法。</p>
<p>我买了一堆书，天天啃，之前的博客也有体现。要说收获，确实也有，但是还是不能让我感觉到我自己究竟学到了什么，感觉不到自己提高在哪。柱哥建议我去落实一个具体的项目，说我的学习方法还是像在学校那样，要等到一切都学会了才敢去动手，一切技术和思想都要落实在某个确定的场景下你才能真的理解它的作用。“这些空闲时间是阿里给你们最大的福利，应该不遗余力的去学习”。</p>
<p>包哥建议我去考高级项管，书我买回来了，挺老厚一本，但是说实话我并不是非常愿意去考它。但是包哥和柱哥思路一致，就是不要浪费时间，这一点我相当认同他们，这段时间应该去干点什么。但我觉得我什么都不会，什么都想学，emmm，柱哥说一个一个来。</p>
<h3 id="3，思维"><a href="#3，思维" class="headerlink" title="3，思维"></a>3，思维</h3><p>柱哥灌输的阿里价值观和方法论。</p>
<p>上周周会是阿里云王坚博士谈到的客户第一。关于客户第一，确实是一句非常老的话，我不能完全领会王坚博士传达的意思，只记住了几点：</p>
<pre><code>* 我们做产品的时候，实际上是站在俯视的角度看待客户，“我的产品这么好，你为什么不用？”，“我做的产品这么完善，你不会用是你的错”。
* 了解客户要具体落实下去，阿里云有上千万用户，但实际上产品和开发人员连一个用户都不会去具体了解。了解所有的用户是不切实际的事，了解一个客户是每个人都可以做到却从没有人做的事。
* 我们和客户生活在不一样的世界，我们可能办公环境舒适生活优雅，但客户可能是个初创公司，空调外机都装在室内，不要用自己的条件衡量客户的条件。
* 开发人员也要了解客户，了解客户的诉求。
</code></pre><p>昨天的周会是阿里CTO行癫百年阿里的分享。概括了阿里技术架构的变迁和演进。从技术支撑业务（业务驱动）到技术驱动，再到现在的数字驱动。谈了一些大数据时代下新的业务解决方案和当前各行业下由数据驱动获得的新的视界。柱哥谈了一些互联网思维方式的解决问题的思路。虽然还不甚理解，但是还是觉得好像有了那么点收获。</p>
<p>关于关注个人的想法。两次周会上我的发言都体现了概括全面但基于自身的思考不足的特点，比如上次讨论课题是我在阿里能得到什么。我答出技术、管理、价值观三个方面，但始终是围绕“我可以获得什么”，而不是具体到“我能在阿里成为一个什么样的人”。昨天谈对行癫关于阿里技术变迁的演讲的收获，我仍然是概括了他的演讲思路和重点，唯一少的就是我自己通过他的谈话收获了什么。我把这些归咎于我自身的水平跟不上行癫大佬的眼界和思维，但实际上也是我思维固化的结果。</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href="javascript:void(0)" class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/随笔/">随笔</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/随笔/">随笔</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-12-18T11:01:12.000Z"><a href="/2018/12/18/前端导出数据到excel文件/">2018-12-18</a></time>
      
      
  
    <h1 class="title"><a href="/2018/12/18/前端导出数据到excel文件/">前端导出数据到excel文件</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="背景："><a href="#背景：" class="headerlink" title="背景："></a>背景：</h2><p><img src="https://cdn.nlark.com/lark/0/2018/png/146541/1545117260764-7cad7831-0a93-4338-b76b-3a25c68be1b7.png" alt="undefined"><br>这是需求。。<br>请教静姐，找到一个库 – xlsx.full.min.js，支持导出导入数据到csv或者excel文件。<br>alicdn：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://g.alicdn.com/cs70/luban-component/0.2.3/xlsx.full.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="使用方法："><a href="#使用方法：" class="headerlink" title="使用方法："></a>使用方法：</h2><h3 id="数据格式："><a href="#数据格式：" class="headerlink" title="数据格式："></a>数据格式：</h3><p><img src="https://cdn.nlark.com/lark/0/2018/png/146541/1545117761507-630eb32a-37dc-46aa-bdf7-9baf1e2beefb.png" alt="undefined"> </p>
<h3 id="页面上添加a标签："><a href="#页面上添加a标签：" class="headerlink" title="页面上添加a标签："></a>页面上添加a标签：</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">download</span>=<span class="string">"machine_info.xlsx"</span> <span class="attr">id</span>=<span class="string">"hf"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="导出过程："><a href="#导出过程：" class="headerlink" title="导出过程："></a>导出过程：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exportToExcel</span> (<span class="params">dataIndex</span>) </span>&#123;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">let</span> jsono = processData(dataIndex); <span class="comment">//这里的jsono就是处理好的数据</span></span><br><span class="line">                </span><br><span class="line">                <span class="keyword">var</span> tmpDown; <span class="comment">//导出的二进制对象</span></span><br><span class="line">                <span class="function"><span class="keyword">function</span> <span class="title">downloadExl</span>(<span class="params">json, type</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">var</span> tmpdata = json[<span class="number">0</span>];</span><br><span class="line">                    json.unshift(&#123;&#125;);</span><br><span class="line">                    <span class="keyword">var</span> keyMap = []; <span class="comment">//获取keys</span></span><br><span class="line">                    <span class="comment">//keyMap =Object.keys(json[0]);</span></span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> tmpdata) &#123;</span><br><span class="line">                        keyMap.push(k);</span><br><span class="line">                        json[<span class="number">0</span>][k] = k;</span><br><span class="line">                    &#125;</span><br><span class="line">                  <span class="keyword">var</span> tmpdata = [];<span class="comment">//用来保存转换好的json </span></span><br><span class="line">                        json.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> keyMap.map(<span class="function">(<span class="params">k, j</span>) =&gt;</span> <span class="built_in">Object</span>.assign(&#123;&#125;, &#123;</span><br><span class="line">                            v: v[k],</span><br><span class="line">                            position: (j &gt; <span class="number">25</span> ? getCharCol(j) : <span class="built_in">String</span>.fromCharCode(<span class="number">65</span> + j)) + (i + <span class="number">1</span>)</span><br><span class="line">                        &#125;))).reduce(<span class="function">(<span class="params">prev, next</span>) =&gt;</span> prev.concat(next)).forEach(<span class="function">(<span class="params">v, i</span>) =&gt;</span> tmpdata[v.position] = &#123;</span><br><span class="line">                            v: v.v</span><br><span class="line">                        &#125;);</span><br><span class="line">                        <span class="keyword">var</span> outputPos = <span class="built_in">Object</span>.keys(tmpdata); <span class="comment">//设置区域,比如表格从A1到D10</span></span><br><span class="line">                        <span class="keyword">var</span> tmpWB = &#123;</span><br><span class="line">                            SheetNames: [<span class="string">'Sheet1'</span>], <span class="comment">//保存的表标题</span></span><br><span class="line">                            Sheets: &#123;</span><br><span class="line">                                <span class="string">'Sheet1'</span>: <span class="built_in">Object</span>.assign(&#123;&#125;,</span><br><span class="line">                                    tmpdata, <span class="comment">//内容</span></span><br><span class="line">                                    &#123;</span><br><span class="line">                                        <span class="string">'!ref'</span>: outputPos[<span class="number">0</span>] + <span class="string">':'</span> + outputPos[outputPos.length - <span class="number">1</span>] <span class="comment">//设置填充区域</span></span><br><span class="line">                                    &#125;)</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;;</span><br><span class="line">                        tmpDown = <span class="keyword">new</span> Blob([s2ab(XLSX.write(tmpWB, </span><br><span class="line">                            &#123;<span class="attr">bookType</span>: (type == <span class="literal">undefined</span> ? <span class="string">'xlsx'</span>:type),<span class="attr">bookSST</span>: <span class="literal">false</span>, <span class="attr">type</span>: <span class="string">'binary'</span>&#125;<span class="comment">//这里的数据是用来定义导出的格式类型</span></span><br><span class="line">                            ))], &#123;</span><br><span class="line">                            type: <span class="string">""</span></span><br><span class="line">                        &#125;); <span class="comment">//创建二进制对象写入转换好的字节流</span></span><br><span class="line">                    <span class="keyword">var</span> href = URL.createObjectURL(tmpDown); <span class="comment">//创建对象超链接</span></span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">"hf"</span>).href = href; <span class="comment">//绑定a标签</span></span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">"hf"</span>).click(); <span class="comment">//模拟点击实现下载</span></span><br><span class="line">                    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//延时释放</span></span><br><span class="line">                        URL.revokeObjectURL(tmpDown); <span class="comment">//用URL.revokeObjectURL()来释放这个object URL</span></span><br><span class="line">                    &#125;, <span class="number">100</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="function"><span class="keyword">function</span> <span class="title">s2ab</span>(<span class="params">s</span>) </span>&#123; <span class="comment">//字符串转字符流</span></span><br><span class="line">                    <span class="keyword">var</span> buf = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(s.length);</span><br><span class="line">                    <span class="keyword">var</span> view = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(buf);</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i != s.length; ++i) view[i] = s.charCodeAt(i) &amp; <span class="number">0xFF</span>;</span><br><span class="line">                    <span class="keyword">return</span> buf;</span><br><span class="line">                &#125;</span><br><span class="line">                 <span class="comment">// 将指定的自然数转换为26进制表示。映射关系：[0-25] -&gt; [A-Z]。</span></span><br><span class="line">                <span class="function"><span class="keyword">function</span> <span class="title">getCharCol</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">let</span> temCol = <span class="string">''</span>,</span><br><span class="line">                    s = <span class="string">''</span>,</span><br><span class="line">                    m = <span class="number">0</span></span><br><span class="line">                    <span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        m = n % <span class="number">26</span> + <span class="number">1</span></span><br><span class="line">                        s = <span class="built_in">String</span>.fromCharCode(m + <span class="number">64</span>) + s</span><br><span class="line">                        n = (n - m) / <span class="number">26</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> s</span><br><span class="line">                &#125;</span><br><span class="line">                downloadExl(jsono)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<h3 id="为button绑定事件："><a href="#为button绑定事件：" class="headerlink" title="为button绑定事件："></a>为button绑定事件：</h3><p><img src="https://cdn.nlark.com/lark/0/2018/png/146541/1545118006261-6c25e7b6-290c-4b74-a1f0-17f7077e8a8d.png" alt="undefined"> </p>
<h3 id="效果："><a href="#效果：" class="headerlink" title="效果："></a>效果：</h3><p><img src="https://cdn.nlark.com/lark/0/2018/png/146541/1545118052145-25c4fbcf-8a21-41af-a29a-6f4697c0b968.png" alt="undefined"> </p>
<h2 id="简单封装成鲁班组件："><a href="#简单封装成鲁班组件：" class="headerlink" title="简单封装成鲁班组件："></a>简单封装成鲁班组件：</h2><p>app-export.js:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'app-export'</span>, Vue.extend(&#123;</span><br><span class="line">    template: join([</span><br><span class="line">        <span class="string">'&lt;button is="app-button" id="&#123;&#123;id&#125;&#125;" bs-style="primary" @click="exportToExcel()"&gt;导出&lt;/button&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;a href="" download="&#123;&#123;filename&#125;&#125;.xlsx" id="hf"&gt;&lt;/a&gt;'</span>,</span><br><span class="line">    ]),</span><br><span class="line">    props: [<span class="string">'id'</span>, <span class="string">'data'</span>,<span class="string">'filename'</span>],</span><br><span class="line">    created: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = (!<span class="keyword">this</span>.id ? (<span class="string">'app-export'</span> + RandomUtil.randomInt(<span class="number">10</span>)) : <span class="keyword">this</span>.id);</span><br><span class="line">        VueUtil.parseProps(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">this</span>.$root[<span class="keyword">this</span>.id] = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">this</span>.filename = (!<span class="keyword">this</span>.filename ? (<span class="string">'export'</span> + RandomUtil.randomInt(<span class="number">10</span>)) : <span class="keyword">this</span>.filename);</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        exportToExcel: <span class="function"><span class="keyword">function</span> (<span class="params">jsono</span>) </span>&#123;</span><br><span class="line">            jsono = <span class="keyword">this</span>.data</span><br><span class="line">            <span class="keyword">if</span>(jsono == <span class="literal">undefined</span> || jsono == <span class="string">''</span>||jsono.length == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> tmpDown; <span class="comment">//导出的二进制对象</span></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">downloadExl</span>(<span class="params">json, type</span>) </span>&#123;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">var</span> tmpdata = json[<span class="number">0</span>];</span><br><span class="line">                json.unshift(&#123;&#125;);</span><br><span class="line">                <span class="keyword">var</span> keyMap = []; <span class="comment">//获取keys</span></span><br><span class="line">                <span class="comment">//keyMap =Object.keys(json[0]);</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> tmpdata) &#123;</span><br><span class="line">                    keyMap.push(k);</span><br><span class="line">                    json[<span class="number">0</span>][k] = k;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">var</span> tmpdata = [];<span class="comment">//用来保存转换好的json </span></span><br><span class="line">                json.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> keyMap.map(<span class="function">(<span class="params">k, j</span>) =&gt;</span> <span class="built_in">Object</span>.assign(&#123;&#125;, &#123;</span><br><span class="line">                    v: v[k],</span><br><span class="line">                    position: (j &gt; <span class="number">25</span> ? getCharCol(j) : <span class="built_in">String</span>.fromCharCode(<span class="number">65</span> + j)) + (i + <span class="number">1</span>)</span><br><span class="line">                &#125;))).reduce(<span class="function">(<span class="params">prev, next</span>) =&gt;</span> prev.concat(next)).forEach(<span class="function">(<span class="params">v, i</span>) =&gt;</span> tmpdata[v.position] = &#123;</span><br><span class="line">                    v: v.v</span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="keyword">var</span> outputPos = <span class="built_in">Object</span>.keys(tmpdata); <span class="comment">//设置区域,比如表格从A1到D10</span></span><br><span class="line">                <span class="keyword">var</span> tmpWB = &#123;</span><br><span class="line">                    SheetNames: [<span class="string">'Sheet1'</span>], <span class="comment">//保存的表标题</span></span><br><span class="line">                    Sheets: &#123;</span><br><span class="line">                        <span class="string">'Sheet1'</span>: <span class="built_in">Object</span>.assign(&#123;&#125;,</span><br><span class="line">                            tmpdata, <span class="comment">//内容</span></span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="string">'!ref'</span>: outputPos[<span class="number">0</span>] + <span class="string">':'</span> + outputPos[outputPos.length - <span class="number">1</span>] <span class="comment">//设置填充区域</span></span><br><span class="line">                            &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">                tmpDown = <span class="keyword">new</span> Blob([s2ab(XLSX.write(tmpWB, </span><br><span class="line">                    &#123;<span class="attr">bookType</span>: (type == <span class="literal">undefined</span> ? <span class="string">'xlsx'</span>:type),<span class="attr">bookSST</span>: <span class="literal">false</span>, <span class="attr">type</span>: <span class="string">'binary'</span>&#125;<span class="comment">//这里的数据是用来定义导出的格式类型</span></span><br><span class="line">                    ))], &#123;</span><br><span class="line">                    type: <span class="string">""</span></span><br><span class="line">                &#125;); <span class="comment">//创建二进制对象写入转换好的字节流</span></span><br><span class="line">                <span class="keyword">var</span> href = URL.createObjectURL(tmpDown); <span class="comment">//创建对象超链接</span></span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">"hf"</span>).href = href; <span class="comment">//绑定a标签</span></span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">"hf"</span>).click(); <span class="comment">//模拟点击实现下载</span></span><br><span class="line">                    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//延时释放</span></span><br><span class="line">                        URL.revokeObjectURL(tmpDown); <span class="comment">//用URL.revokeObjectURL()来释放这个object URL</span></span><br><span class="line">                    &#125;, <span class="number">100</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="function"><span class="keyword">function</span> <span class="title">s2ab</span>(<span class="params">s</span>) </span>&#123; <span class="comment">//字符串转字符流</span></span><br><span class="line">                    <span class="keyword">var</span> buf = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(s.length);</span><br><span class="line">                    <span class="keyword">var</span> view = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(buf);</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i != s.length; ++i) view[i] = s.charCodeAt(i) &amp; <span class="number">0xFF</span>;</span><br><span class="line">                    <span class="keyword">return</span> buf;</span><br><span class="line">                &#125;</span><br><span class="line">                 <span class="comment">// 将指定的自然数转换为26进制表示。映射关系：[0-25] -&gt; [A-Z]。</span></span><br><span class="line">                <span class="function"><span class="keyword">function</span> <span class="title">getCharCol</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">let</span> temCol = <span class="string">''</span>,</span><br><span class="line">                    s = <span class="string">''</span>,</span><br><span class="line">                    m = <span class="number">0</span></span><br><span class="line">                    <span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        m = n % <span class="number">26</span> + <span class="number">1</span></span><br><span class="line">                        s = <span class="built_in">String</span>.fromCharCode(m + <span class="number">64</span>) + s</span><br><span class="line">                        n = (n - m) / <span class="number">26</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> s</span><br><span class="line">                &#125;</span><br><span class="line">                downloadExl(jsono)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;))</span><br></pre></td></tr></table></figure></p>
<p>用法：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">app-export</span> <span class="attr">filename</span>=<span class="string">"machine-info"</span> <span class="attr">:data</span>=<span class="string">"context.machineData"</span>&gt;</span><span class="tag">&lt;/<span class="name">app-export</span>&gt;</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href="javascript:void(0)" class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/前端/">前端</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/学习笔记/">学习笔记</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-12-18T11:01:12.000Z"><a href="/2018/12/18/LeeTCode两数相加/">2018-12-18</a></time>
      
      
  
    <h1 class="title"><a href="/2018/12/18/LeeTCode两数相加/">LeeTCode两数相加</a></h1>
  

    </header>
    <div class="entry">
      
        <h3 id="题目描述："><a href="#题目描述：" class="headerlink" title="题目描述："></a>题目描述：</h3><p><img src="https://cdn.nlark.com/lark/0/2018/png/146541/1545125946082-1bfce059-4c3b-4786-bf8c-d4ef7223f3e1.png" alt="image.png | left | 827x199"></p>
<h4 id="链表和参数格式："><a href="#链表和参数格式：" class="headerlink" title="链表和参数格式："></a>链表和参数格式：</h4><h3 id=""><a href="#" class="headerlink" title=""></a><img src="https://cdn.nlark.com/lark/0/2018/png/146541/1545125984985-39df3358-d8c7-4866-b2ff-f43a5896bf41.png" alt="image.png | left | 333x192"></h3><p>思路是对的，但是硬是折腾了将近一天才提交编译通过。。。</p>
<h3 id="贴个代码"><a href="#贴个代码" class="headerlink" title="贴个代码"></a>贴个代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addTwoNumbers = <span class="function"><span class="keyword">function</span>(<span class="params">l1, l2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result, res;</span><br><span class="line">  <span class="keyword">var</span> p = l1;</span><br><span class="line">  <span class="keyword">var</span> q = l2;</span><br><span class="line">  <span class="keyword">var</span> pow = <span class="number">1</span>;</span><br><span class="line">  temp = &#123;</span><br><span class="line">    value:<span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span>(p != <span class="literal">null</span> || q != <span class="literal">null</span>)&#123;</span><br><span class="line">    </span><br><span class="line">    res = <span class="keyword">new</span> ListNode(calculate(p, q, temp) )</span><br><span class="line">    </span><br><span class="line">    p == <span class="literal">null</span> ? <span class="literal">null</span> : p = p.next;</span><br><span class="line">    q == <span class="literal">null</span> ? <span class="literal">null</span> : q = q.next;</span><br><span class="line"></span><br><span class="line">    result == <span class="literal">undefined</span> ?</span><br><span class="line">      result = res :</span><br><span class="line">      result.addNode(res);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(temp.value == <span class="number">1</span>)&#123;</span><br><span class="line">    result.addNode(<span class="keyword">new</span> ListNode(<span class="number">1</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ListNode.prototype.addNode = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> p = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">var</span> q = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">while</span>(p != <span class="literal">null</span>)&#123;</span><br><span class="line">    p.next != <span class="literal">null</span> ? q = p.next : <span class="literal">null</span>;</span><br><span class="line">    p = p.next;</span><br><span class="line">  &#125;</span><br><span class="line">  q.next = val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculate</span> (<span class="params">v1, v2, temp</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="number">0</span>;</span><br><span class="line">  v1 == <span class="literal">null</span> ? v1 = &#123;<span class="attr">val</span>:<span class="number">0</span>&#125; : <span class="literal">null</span>;</span><br><span class="line">  v2 == <span class="literal">null</span> ? v2 = &#123;<span class="attr">val</span>:<span class="number">0</span>&#125; : <span class="literal">null</span>;</span><br><span class="line">  v1.val + v2.val + temp.value &lt; <span class="number">10</span> ?</span><br><span class="line">    (result = temp.value + v1.val + v2.val, temp.value = <span class="number">0</span>) :</span><br><span class="line">    (result = temp.value + v1.val + v2.val - <span class="number">10</span>,temp.value = <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用链表存储数字的一个显而易见的作用在于，可以突破语言的极限数据大小。在求斐波那契数列第100项之类的问题时，语言本身的变量已经存不下那么大的数了，这个时候就得用链表、数组来模拟数字，逐位数学运算。</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href="javascript:void(0)" class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/前端/">前端</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/学习笔记/">学习笔记</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-11-17T05:36:15.000Z"><a href="/2018/11/17/2018-11-杂记/">2018-11-17</a></time>
      
      
  
    <h1 class="title"><a href="/2018/11/17/2018-11-杂记/">2018-11-杂记</a></h1>
  

    </header>
    <div class="entry">
      
        <p>大概翻完了《代码整洁之道》，和《重构-改善既有代码的设计》一起买的。发现后面都是关于java开发的细枝末节，所以就只看完了前几章。好几本书的序言都说，如果熟悉C语言的话看java应该不难，然后BB一大堆面向对象开发，C语言有对象吗？扯淡。买这些书主要是觉得自己写的代码有点糟糕，而且也没啥好代码作为参照，不管怎么说，看完是有点进步吧，比如现在知道给变量起名的时候区分动名词，不写废话注释，不再写超级大的函数，一个函数不再接受五六个参数。😂</p>
<h2 id="1、关于变量名"><a href="#1、关于变量名" class="headerlink" title="1、关于变量名"></a>1、关于变量名</h2><p>之前写代码的时候，变量名都随便起，我觉得emmm好像是这个单词然后拿来就用，不区分动词名词也不区分语态。所以最终写完的程序要么加注释要么只有我能看得懂，即使是我自己看，也要花很长时间在区分函数功能变量功能上面。而且由于懒，变量名字都像兔尾巴，能写字母不用单词，能一个单词解决的不用两个单词，代价是添加功能或者变更需求的时候看自己的代码就像在看屎。所以，起个有意义的不会混淆的一目了然的长的像火车一样的变量名是有必要的。</p>
<h3 id="a-有意义"><a href="#a-有意义" class="headerlink" title="a . 有意义"></a>a . 有意义</h3><p>用abc iIlL1 o0这样的当变量名就不说了，谁看谁知道，后面维护代码的接盘侠不给他天灵盖打烂算他头铁。除了循环里的计数器写成 i j k h 这样的单字母，其余时候都最好起一个有实际意义的名字，比如变量里存的是图片地址数组，imgUrlList很明显比 abc 更合适，有了合适的变量名后，与之相关的操作也顺带着一目了然起来，比如imgUrlList.push()很明显是要添加一个新图片地址。</p>
<h3 id="b-区分动名词"><a href="#b-区分动名词" class="headerlink" title="b . 区分动名词"></a>b . 区分动名词</h3><p>有一天中午提前去吃饭，同事的Leader给他发了一段他提交的代码，让他自己找哪里有问题。我们三个人盯着十行代码看了20分钟也没觉的哪有问题，Leader说你看你的变量名是动词还是名词。😅。。用于保存从表单获取用户输入的信息的变量写成了getUserInfoList，实际上写成userInfoList就可以了，get更像是一个动作，用来取函数名不错，但是变量在定义时通常我们期望他保存一个固定类型固定用处的值，因此函数名用动词短语更合理，变量名用名词更合理。 </p>
<h3 id="c-区分时态语态"><a href="#c-区分时态语态" class="headerlink" title="c . 区分时态语态"></a>c . 区分时态语态</h3><p>英语老师说过，动词是有时态的，不同的时态可以描述不同的时间发生的动作，同时还是有语态的，描述这个动作是被动的还是主动的。假设目前有这样一个需求：页面上有一堆图标可选，但只能选择一个，点击之后图标高亮，未被选中的图标变灰。其中一种实现思路是，每发生一次点击就记录下当前点击的图标，在下一次点击发生时把上一次点击的图标变灰，然后再把当前点击的图标设成高亮。那么就需要一个变量来保存上一次点击的图标的信息。</p>
<p>如果写成markIcon好像也无伤大雅，但是写成lastMarkIcon更能表现出这个变量保存的是上一次点击时的icon，进一步的，考虑到icon是被标记的，写成lastMarkedIcon更能表现出这个变量的作用，意义，内容。</p>
<h3 id="d-避免混淆"><a href="#d-避免混淆" class="headerlink" title="d . 避免混淆"></a>d . 避免混淆</h3><p>如果在一个处理接口数据的函数里，定义了tempList，tempObj，list，showList这几个变量，下一次接口变更的时候谁还能看的懂？只有再从头理一遍处理逻辑才能明白每个变量的意思。避免混淆的方法是增加语境和修饰词，虽然这样会让变量名长的像火车，但是你可以一眼看出sortedDataList和formatedTimeStemp是排序过的数据数组和格式化后的时间戳。</p>
<h2 id="2、关于函数"><a href="#2、关于函数" class="headerlink" title="2、关于函数"></a>2、关于函数</h2><h3 id="a-短"><a href="#a-短" class="headerlink" title="a . 短"></a>a . 短</h3><p>上上周吧。我写了一个有5个子标签4个表格和12个echarts折线图的页面，这些数据来源于三个接口。那么当ajax返回的时候就得通知这些表格和折线图绘制渲染。从接口获取的数据也没法直接在页面上用，还需要格式化，处理成数组和对象才能传给echarts。于是我的ajax回调函数写了将近200行，处理数据，生成echarts实例，通知渲染函数。最后基本无论什么改动变更都要去改这个函数，虽然我承认一气呵成写出来很爽，后面改起来更爽，毕竟我都快在函数里写注释说这块是干嘛的了。虽然最后好歹功能都正常提了预发，后面还是花时间重构了一下。</p>
<p>重构的第一件事，就是拆开这个大的不像话的函数，把数据处理和生成实例分离成单独的函数，ajax回调函数只负责通知处理和渲染函数。这么拆开以后，函数逻辑和处理过程都清晰了很多，更改某部分的功能只需要去修改对应的处理函数，重复代码也精简了很多。</p>
<p>函数应该只干一件事 – 要么通知别人做，要么自己做。如果有几段代码重复出现，就应该拎出来封装成工具函数，在合适的时机调用，返回恰当的处理结果。</p>
<h3 id="b-减少参数"><a href="#b-减少参数" class="headerlink" title="b . 减少参数"></a>b . 减少参数</h3><p>也提一提我上上周写的那个怪物页面，我在js里写了接收五六个参数的函数。😂</p>
<p>无非是想耍耍小聪明，尽量让一个函数处理更多相似的事情。我用了一堆标识参数来标识哪个表格发起的调用，一堆布尔值来区分处理逻辑，还有一两个参数是真正需要传递的。我以为这算是函数的重载吧，实际上只是写了一大堆愚蠢的if else switch和三目运算符。函数应该简简单单的只做一件事，而不是帮我去区分含混不清的数据。真正应该区分的是传递给函数的数据，而不是在调用函数的时候传一堆区分标识符。</p>
<p>很多的时候，是我没考虑好数据结构和函数的关系。昨天在别人的博客上看到一句话，聪明的数据结构加愚蠢的代码比愚蠢的数据结构加聪明的代码好得多，深以为然。而且我觉得如果在构思的时候合理划分保存数据的方式方法，写出来的代码也不至于过于丑陋。</p>
<h3 id="c-函数式编程"><a href="#c-函数式编程" class="headerlink" title="c . 函数式编程"></a>c . 函数式编程</h3><p>刚开始的时候其实我也没把这个概念放在心上，但其实遵循这个思想真的能在开发的时候提供便捷减少错误。有那么几点可以在实践中做些考虑：</p>
<ul>
<li>没有副作用 函数尽量不要跟外部环境互动，比如修改全局变量。函数的所有功能就是返回一个运算得到的值。</li>
<li>引用透明 同样的输入总会导致同样的输出，不会出现预期之外的结果</li>
</ul>
<h2 id="3、注释"><a href="#3、注释" class="headerlink" title="3、注释"></a>3、注释</h2><p>别写没意义的注释，别写多余注释，别写啰啰嗦嗦的注释。</p>
<p>其实在做好前面两条的时候，注释会显得多余。清晰可读的变量名和简短可预期的函数比注释更有表现力，所以很多时候注释是对坏代码的补充而不是对代码意图的阐释。</p>
<h2 id="4、小记"><a href="#4、小记" class="headerlink" title="4、小记"></a>4、小记</h2><p>以上有些观念是在阿里内网上的一篇大佬分享里学到的，高级语言相对机器语言来说最显而易见的作用就是高级语言更接近自然语言，更像日常说话，写作，描述时的词法语法，所以为啥不把程序写的跟小说一样清晰明了呢。让人能够轻松读懂代码的关键在于起个好的变量名，写简短单一职责可预期的函数，此外合理安排代码放置的位置，让每一行代码承上启下，总是按着执行顺序放置。</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href="javascript:void(0)" class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/前端/">前端</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/学习笔记/">学习笔记</a>, <a href="/tags/代码整洁之道/">代码整洁之道</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-10-27T10:14:37.000Z"><a href="/2018/10/27/2018-10-第四周读书笔记/">2018-10-27</a></time>
      
      
  
    <h1 class="title"><a href="/2018/10/27/2018-10-第四周读书笔记/">2018/10第四周杂记</a></h1>
  

    </header>
    <div class="entry">
      
        <p>既然是杂记，就当流水账写吧。</p>
<h3 id="deepin开发者与用户大会-南京站"><a href="#deepin开发者与用户大会-南京站" class="headerlink" title="deepin开发者与用户大会 - 南京站"></a>deepin开发者与用户大会 - 南京站</h3><p>上周偶然看见了deepin在南京举办开发者与用户大会的消息，虽然我不是开发者但好歹算个常年双系统的用户吧，于是周末本着打酱油的心态去了趟南京，开会的地方是真偏呐。下了地铁就去签到了，书包里背了两块中秋节公司发的月饼也没好意思拿出来吃。。deepin的分享都很精彩，羡慕他们始终如一的坚持自由和开源的信仰，特别是见证了这三年间deepin从交互界面到系统软件优化以及对常用软件进行linux适配的进步，虽然说光有情怀等于画饼充饥，但是我觉得没点情怀也很难做到这么多年面对质疑和唱衰的坚守。oray CTO分享了花生壳向日葵等产品，我用过向日葵的远控，了解过花生壳的内网穿透。我用过windows的原生远控，用过国外的team viewer，实话实说向日葵应该是最好用的，而且单个远程主机免费还不像team viewer那么多限制。不过让我觉得励志的是，这个CTO大学学的是柴油机。。虽然我也很喜欢deepin，但是用deepin还咋玩游戏。。</p>
<p>嗯。。以上是上周断更的原因。</p>
<h3 id="关于工作"><a href="#关于工作" class="headerlink" title="关于工作"></a>关于工作</h3><p>为了寻求不写lowB代码的方法，我看了几章设计模式，虽说有所启发，但是还觉得哪里我没领悟到，或者说缺失了什么。这一周给我的需求页面比较复杂，一个页面十几个echarts折线图，为了让他们互不干涉，写了很多if判断用了很多全局变量，代码结构不清晰，逻辑也显得很混乱，有的函数接收四五个参数或者写了快100行。阳哥建议我有空重构一下，emmm我自己都不知道从何下手，况且我也没有更好的办法分离它们。平均一个需求页面要写800到1000行js（jq），有些重复代码不知道如何抽象出来，用到全局变量的地方也没什么好的办法约束它们。。我又买了几本书，希望看完能有点启发吧。</p>
<p>写了二十多个echarts之后，我终须下定决心动手写个echart类，一个实例对应一个图表，每个实例维护自己的配置参数，也许能改善重复的配置过程，增加一点复用。用后端给的接口数据做了下测试，渲染个折线图也不成问题，但是还觉得有些地方没考虑到，或者结构划分的还不是太好。代码放在<a href="https://github.com/flycatrix/echartCreator" target="_blank" rel="noopener">github</a>，下周如果再有echarts的需求，也许就能想到改进方案了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Chart</span> (<span class="params">IDselector</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.selector = IDselector;</span><br><span class="line">&#125;</span><br><span class="line">Chart.prototype = &#123;</span><br><span class="line">      generateData,        <span class="comment">// 生成data</span></span><br><span class="line">      generateDate,        <span class="comment">// 生成时间date</span></span><br><span class="line">      timeFormater,        <span class="comment">// 格式化时间戳  </span></span><br><span class="line">      generateSeries,      <span class="comment">// 生成series</span></span><br><span class="line">      dataFormater,        <span class="comment">// 格式化数据，返回数组[格式化后的数据，单位]</span></span><br><span class="line">      generateOption,      <span class="comment">// 生成option</span></span><br><span class="line">      renderChart          <span class="comment">// 渲染图表</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// res -- ajax传回的用于渲染表格的数据，数组。property -- 生成表格的字段，数组。formatFlag -- 是否对数据格式化</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateData</span> (<span class="params">res,property,formatFlag = ture</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> args = &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> data = [];</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">Array</span>.isArray(property))&#123;</span><br><span class="line">        <span class="built_in">console</span>.warn(<span class="string">'property should be a array'</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; property.length; i++)&#123;   <span class="comment">// 取出property中存的字段名</span></span><br><span class="line">            args[property[i]] = [];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; res.length; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(formatFlag)&#123;</span><br><span class="line">                    args[property[i]].push(<span class="keyword">this</span>.dataFormater(res[j][property[i]])[<span class="number">0</span>])     <span class="comment">// 根据拿到的字段名格式化后取值，作为数组存在data变量中</span></span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    args[property[i]].push(res[j][property[i]])     </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.unit = <span class="keyword">this</span>.dataFormater(res[<span class="number">0</span>][property[<span class="number">0</span>]])[<span class="number">1</span>] <span class="comment">// 记录单位</span></span><br><span class="line">    <span class="keyword">this</span>.data = args;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  data -- 含有时间戳数据的数组 timestemp -- 时间戳的字段名，fmt -- 时间格式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateDate</span> (<span class="params">data,timestemp,fmt</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timeArray = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.length; i++)&#123;</span><br><span class="line">        timeArray.push(<span class="keyword">new</span> <span class="built_in">Date</span>(data[i][timestemp]*<span class="number">1000</span>).format(fmt))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.formatedDate = timeArray;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 给时间戳类型的时间转换时间格式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeFormater</span> (<span class="params">date,fmt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> formatedDate = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; date.length ; i++)&#123;</span><br><span class="line">        <span class="keyword">var</span> temp = <span class="keyword">new</span> <span class="built_in">Date</span>(date[i])</span><br><span class="line">        formatedDate.push(temp.format(fmt))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.formatedDate = formatedDate;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 格式化处理单个数据，返回处理后的数字和单位组成的数组</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dataFormater</span> (<span class="params">byte</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(byte == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> [<span class="string">'0'</span>,<span class="string">''</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> k = <span class="number">1024</span>;</span><br><span class="line">    <span class="keyword">var</span> sizes = [<span class="string">''</span>,<span class="string">'K'</span>, <span class="string">'M'</span>, <span class="string">'G'</span>, <span class="string">'T'</span>];</span><br><span class="line">    <span class="keyword">var</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.log(byte) / <span class="built_in">Math</span>.log(k));</span><br><span class="line">    <span class="comment">// 返回数组 [缩小后保留一位小数的数字,单位]</span></span><br><span class="line">    <span class="keyword">return</span> [(byte / <span class="built_in">Math</span>.pow(k, i)).toFixed(<span class="number">1</span>),sizes[i]]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 生成series,data为包含几个属性名命名的数组的对象，property需要生成series的属性名的数组，name为series的name数组</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateSeries</span> (<span class="params">property,name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = []</span><br><span class="line">    <span class="keyword">if</span>(!name)&#123;              <span class="comment">// 如果不传name数组则以property作为name</span></span><br><span class="line">        name = property</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; property.length; i++)&#123;</span><br><span class="line">        <span class="keyword">let</span> series = &#123;</span><br><span class="line">            name:name[i],</span><br><span class="line">            type:<span class="string">'line'</span>,</span><br><span class="line">            showAllSymbol:<span class="literal">true</span>,</span><br><span class="line">            itemStyle:&#123;</span><br><span class="line">                normal:&#123;</span><br><span class="line">                    color:<span class="string">'gray'</span></span><br><span class="line">                &#125;   </span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle:&#123;  </span><br><span class="line">                normal:&#123;</span><br><span class="line">                    color: <span class="string">'#007FFF'</span></span><br><span class="line">                &#125;  </span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                normal: &#123;</span><br><span class="line">                    show: <span class="literal">true</span>,</span><br><span class="line">                    distance:<span class="number">10</span>,</span><br><span class="line">                    position: <span class="string">'top'</span>,</span><br><span class="line">                    formatter: <span class="string">'&#123;c&#125;'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            data:<span class="keyword">this</span>.data[property[i]].reverse()</span><br><span class="line">        &#125;</span><br><span class="line">        arr.push(series)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.series = arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设定option, dataTime时间数组，series,unit单位，legend折线标识</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateOption</span> (<span class="params">legend</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> option = &#123;</span><br><span class="line">        color:[<span class="string">'#007FFF'</span>,<span class="string">'#FF0000'</span>],</span><br><span class="line">        xAxis : [</span><br><span class="line">            &#123;</span><br><span class="line">                type : <span class="string">'category'</span>,</span><br><span class="line">                axisLine:&#123;  <span class="comment">//坐标轴线相关设置</span></span><br><span class="line">                    lineStyle:&#123;</span><br><span class="line">                        color: <span class="string">'#90A0AE'</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                data:<span class="keyword">this</span>.formatedDate,</span><br><span class="line">                splitLine: &#123;</span><br><span class="line">                    show: <span class="literal">false</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ], </span><br><span class="line">        yAxis : [</span><br><span class="line">            &#123;</span><br><span class="line">                type : <span class="string">'value'</span>,</span><br><span class="line">                axisLine:&#123;  <span class="comment">//坐标轴线相关设置</span></span><br><span class="line">                    lineStyle:&#123;</span><br><span class="line">                        color: <span class="string">'#90A0AE'</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                axisLabel:&#123;<span class="attr">formatter</span>:<span class="string">'&#123;value&#125;'</span>+ <span class="keyword">this</span>.unit&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        tooltip : &#123; <span class="comment">//鼠标放上去的提示</span></span><br><span class="line">            trigger: <span class="string">'item'</span>,</span><br><span class="line">            formatter: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> params.name+<span class="string">'&lt;br/&gt;'</span>+ params.seriesName + <span class="string">':'</span> + params.data + <span class="string">' 单位：'</span> + that.unit;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        dataZoom: [&#123;     </span><br><span class="line">            type: <span class="string">'inside'</span>,  <span class="comment">//slider表示有滑动块的，inside表示内置的</span></span><br><span class="line">            start: <span class="number">0</span>,        </span><br><span class="line">            end: <span class="number">100</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            start: <span class="number">0</span>,</span><br><span class="line">            end: <span class="number">100</span>,</span><br><span class="line">            handleSize: <span class="string">'90%'</span>,</span><br><span class="line">            handleStyle: &#123;</span><br><span class="line">                color: <span class="string">'#000'</span>,</span><br><span class="line">                shadowBlur: <span class="number">3</span>,</span><br><span class="line">                shadowColor: <span class="string">'rgba(0, 0, 0, 0.6)'</span>,</span><br><span class="line">                shadowOffsetX: <span class="number">2</span>,</span><br><span class="line">                shadowOffsetY: <span class="number">2</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;],</span><br><span class="line">        series: <span class="keyword">this</span>.series,</span><br><span class="line">        legend:&#123;</span><br><span class="line">            show:<span class="literal">false</span>,</span><br><span class="line">            data:[],</span><br><span class="line">            <span class="comment">// selected:&#123;</span></span><br><span class="line">            <span class="comment">//     'prop':false,</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span>(legend)&#123;</span><br><span class="line">        option.color = [<span class="string">'#007FFF'</span>,<span class="string">'#FF0000'</span>]</span><br><span class="line">        option.legend.show = <span class="literal">true</span>;</span><br><span class="line">        option.legend.data = legend</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.option = option;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 渲染图表</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderChart</span> (<span class="params">option</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> chart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="keyword">this</span>.selector))</span><br><span class="line">    chart.setOption(<span class="keyword">this</span>.option);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样可以把从ajax数据处理到生成echarts的过程简化为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> Chart(<span class="string">'emm'</span>)</span><br><span class="line">a.generateData(res.data,[<span class="string">'ifout'</span>,<span class="string">'pkt_speed'</span>],<span class="string">'ts'</span>,<span class="string">'MM-dd'</span>);</span><br><span class="line">a.generateDate(res.data,<span class="string">'ts'</span>,<span class="string">'hh:mm'</span>);</span><br><span class="line">a.generateSeries([<span class="string">'ifout'</span>,<span class="string">'pkt_speed'</span>]);</span><br><span class="line">a.generateOption([<span class="string">'ifout'</span>,<span class="string">'pkt_speed'</span>]);</span><br><span class="line">a.renderChart()</span><br></pre></td></tr></table></figure>
<p>option的配置好像不咋灵活。。            </p>
<h3 id="关于读书"><a href="#关于读书" class="headerlink" title="关于读书"></a>关于读书</h3><p>从我觉得看设计模式的书不能直接帮助我改善代码，就开始有点懈怠。几个设计原则和编程技巧，其实我也没怎么能切实的领悟到并运用好，没人review代码以及没个师傅真是个头疼的事。。我开始看《代码整洁之道》，每天翻几页，希望体现在代码上有直接的效果吧。。</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href="javascript:void(0)" class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/前端/">前端</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/学习笔记/">学习笔记</a>, <a href="/tags/JavaScript设计模式与开发实践/">JavaScript设计模式与开发实践</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-10-13T04:54:49.000Z"><a href="/2018/10/13/2018-10-第二周读书笔记/">2018-10-13</a></time>
      
      
  
    <h1 class="title"><a href="/2018/10/13/2018-10-第二周读书笔记/">2018/10第二周读书笔记</a></h1>
  

    </header>
    <div class="entry">
      
        <p>不知不觉断更三个月了。。阿里云外包的工作没有想象中的难适应，多页面vue+jQuery的技术栈，大部分时间都像在写jQuery和原生JS，实现的需求虽然算是过关了，但是觉得代码质量和代码规范还是一团糟。。从一周前每天看几章《JavaScript设计模式与开发实践》，写了点笔记和感想，趁着周末总结出来。</p>
<h2 id="关于面向对象的JavaScript"><a href="#关于面向对象的JavaScript" class="headerlink" title="关于面向对象的JavaScript"></a>关于面向对象的JavaScript</h2><p>传统面向对象语言的几个重要特征，比如继承，封装，多态，在JavaScript动态类型脚本语言中都用迂回的方式实现。比如封装不再依赖private，protected之类的关键字，而是靠函数作用域实现；继承靠原型链实现；多态靠检测参数的值或者给传进来的对象定义一个相同方法名的不同方法。</p>
<h3 id="动态类型"><a href="#动态类型" class="headerlink" title="动态类型"></a>动态类型</h3><blockquote>
<p>对变量赋值时，不需考虑它的类型 </p>
<p>——可以尝试调用任何对象的任意方法，而不需要考虑它原本是否被设计为拥有该方法</p>
</blockquote>
<p>只关注对象的行为，不去关注对象本身。例如一个对象如果有pop和push方法并且它们有正确的实现，那么就可以当作一个栈来使用（鸭子类型）。</p>
<p>动态类型赋予JavaScript极大的灵活性，也是它能够简化实现各种静态语言设计模式的重要原因。</p>
<h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><p>同一操作作用于不同的对象上可以产生不同的解释和执行结果。</p>
<p>——把“做什么”和“谁来做”相分离。</p>
<p>1，检测参数，用if分支实现多态。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> student = &#123;</span><br><span class="line">    say:funtion()&#123;</span><br><span class="line">    	<span class="built_in">console</span>.log(<span class="string">'am student'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> teacher = &#123;</span><br><span class="line">    say:funtion()&#123;</span><br><span class="line">    	<span class="built_in">console</span>.log(<span class="string">'am teacher'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> introduce = <span class="function"><span class="keyword">function</span>(<span class="params">position</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(position === <span class="string">'student'</span>)&#123;            <span class="comment">// 检测传进来的参数值选择采取的操作</span></span><br><span class="line">        student.say()</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(position === <span class="string">'teacher'</span>)&#123;</span><br><span class="line">        teacher.say()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">introduce(<span class="string">'teacher'</span>)  <span class="comment">// am teacher</span></span><br></pre></td></tr></table></figure>
<p>introduce函数通过检测传进来的参数值来执行不同的操作，但如果想再增加一个职位，那么就只能在introduce函数里继续堆砌if语句。</p>
<p>这里可以注意到，student和teacher有同一个方法名的方法say()，虽然他们执行结果不同，但是调用过程是一样的，因此还可以直接把不同的对象传进去，调用同一个方法名的方法实现多态。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> introduce = <span class="function"><span class="keyword">function</span>(<span class="params">position</span>)</span>&#123;</span><br><span class="line">    position.say()</span><br><span class="line">&#125;</span><br><span class="line">introduce(student);  <span class="comment">// am student</span></span><br><span class="line">introduce(teacher);  <span class="comment">// am teacher</span></span><br></pre></td></tr></table></figure>
<h3 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h3><p>创建一个对象有两种思路：</p>
<pre><code>a，先指定类型，通过实例化这个类获得一个对象。

b，不关心具体类型，找到一个对象克隆得到一个对象。
</code></pre><p>很明显JavaScript使用第二种思路创建对象。具体的实现过程是那个经典的问题，new操作都干了啥。。</p>
<p>这种创建对象的思路有两个重要的特征，一是<strong>对象能够记住它的原型</strong>，二是<strong>如果对象无法响应一个请求，会委托给自己的原型去处理。</strong></p>
<p>JavaScript的对象最初都是由Object.prototype克隆得到的，所以所有对象最初的原型都指向Object.prototype，但是JavaScript允许对象动态的改变对象原型的指向，因此才有各种灵活的继承实现。</p>
<h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><p>保证一个类仅有一个实例，并提供一个访问这个实例的全局访问点。</p>
<p>思路：用一个变量标识这个类有没有创建过对象，如果创建过则直接返回之前创建的对象，否则创建一个实例并返回。</p>
<h3 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h3><p>普通实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Singleton.getInstance = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> instance = <span class="literal">null</span>;                <span class="comment">// 是否创建过对象的标识</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!instance)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton(name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;                <span class="comment">// 访问点</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>缺点：使用者必须用Singleton.getInstance创建单例，而不能直接使用new Singleton()的方式。</p>
<p>透明实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Singleton = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> instance;                     <span class="comment">// 是否创建过对象的标识</span></span><br><span class="line">    <span class="keyword">var</span> Singleton = <span class="function"><span class="keyword">function</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance)&#123;</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.name = props;</span><br><span class="line">        <span class="keyword">this</span>.init();				 <span class="comment">// 为单例执行某些操作</span></span><br><span class="line">        <span class="keyword">return</span> instance = <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Singleton.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    	<span class="comment">// some code...</span></span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> Singleton;</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> Singleton(<span class="string">'xcola'</span>)</span><br><span class="line">a   <span class="comment">// Singleton &#123;name: "xcola"&#125;</span></span><br></pre></td></tr></table></figure>
<p>缺点：违反单一职责原则，代码复杂。</p>
<p>代理实现：将管理单一实例的代码和创建实例的代码相拆分，使得创建不同的对象也可以使用单例模式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CreateObj = <span class="function"><span class="keyword">function</span>(<span class="params">props</span>)</span>&#123;			<span class="comment">// 创建单例</span></span><br><span class="line">    <span class="keyword">this</span>.name = props;</span><br><span class="line">    <span class="keyword">this</span>.init();</span><br><span class="line">&#125;</span><br><span class="line">CreateObj.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;       <span class="comment">// 执行构建单例的操作</span></span><br><span class="line">	<span class="comment">// some code...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> proxyCreateObj = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;			<span class="comment">// 代理实现控制单一实例</span></span><br><span class="line">    <span class="keyword">var</span> instance;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!instance)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> CreateObj(props);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="keyword">var</span> a = proxyCreateObj(<span class="string">'emm'</span>)</span><br><span class="line">a     <span class="comment">// CreateObj &#123;name: "emm"&#125;</span></span><br></pre></td></tr></table></figure>
<p>BB了这么多，JavaScript最简单的单例实现是创建全局变量。/笑哭</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">name</span>:<span class="string">'emm'</span>&#125;</span><br><span class="line"><span class="comment">//首先它独一无二，其次它能全局都访问到</span></span><br></pre></td></tr></table></figure>
<p>大量使用全局变量总是不好的，引入命名空间。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> namespace = &#123;</span><br><span class="line">    a:&#123;&#125;,</span><br><span class="line">    b:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="关于惰性单例"><a href="#关于惰性单例" class="headerlink" title="关于惰性单例"></a>关于惰性单例</h3><p>在需要的时候才创建单例实例（事件触发）。将创建实例的职责和管理单例的职责写在两个方法里，他们相互之间可以独立变化而互不影响，结合在一起使用就完成了一个单例模式。</p>
<h2 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h2><p>定义一系列的算法，把他们封装起来，使他们可以相互替换。</p>
<p>思路：一个基于策略模式的程序由至少两部分组成，一组<strong>策略类，存放具体的算法</strong>，一组<strong>环境类，接受客户的请求，委托给某一个策略类处理。</strong></p>
<p>做法：告诉程序，谁来做，做什么。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strategies = &#123;					<span class="comment">// 一组策略类</span></span><br><span class="line">    <span class="string">"s"</span>:<span class="function"><span class="keyword">function</span>(<span class="params">salary</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> salary*<span class="number">4</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"a"</span>:<span class="function"><span class="keyword">function</span>(<span class="params">salary</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> salary*<span class="number">3</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">	<span class="string">"b"</span>:<span class="function"><span class="keyword">function</span>(<span class="params">salary</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> salary*<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> caculate = <span class="function"><span class="keyword">function</span>(<span class="params">level,salary</span>)</span>&#123;	<span class="comment">// 选取策略类，执行对应操作</span></span><br><span class="line">    <span class="keyword">return</span> strategies[level](salary);</span><br><span class="line">&#125;</span><br><span class="line">caculate(<span class="string">'s'</span>,<span class="number">1000</span>)      <span class="comment">// 4000</span></span><br></pre></td></tr></table></figure>
<p>应用场景：某个元素的不同动态效果，不断变更的表单验证方式</p>
<h2 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h2><p>为一个对象提供一个代用品或者占位符，以便控制对它的访问。</p>
<p>思路：当不方便直接访问一个对象或者当前不满足条件的时候，提供一个替身对象来控制这个对象。</p>
<h3 id="虚拟代理"><a href="#虚拟代理" class="headerlink" title="虚拟代理"></a>虚拟代理</h3><p>创建代理舰艇某个对象的状态变化，在合适的时机由代理对象执行操作。</p>
<p>example：在图片尚未加载完成时显示loading.gif图。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newImg = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> imgNode = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(imgNode);</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        setSrc:<span class="function"><span class="keyword">function</span>(<span class="params">src</span>)</span>&#123;</span><br><span class="line">            imgNode.src = src;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="keyword">var</span> proxySetImg = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image;</span><br><span class="line">    img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        newImg.setSrc(<span class="keyword">this</span>.src);            <span class="comment">// 3，加载完毕时将img节点的loading图替换成真正的图片</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        setSrc:<span class="function"><span class="keyword">function</span>(<span class="params">src</span>)</span>&#123;</span><br><span class="line">            newImg.setSrc(<span class="string">'loading.gif'</span>);   <span class="comment">// 2，先显示loading图</span></span><br><span class="line">            img.src = src                   <span class="comment">// 1，接受真正的图片地址</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line">proxySetImg.setSrc(<span class="string">'http://imgurl'</span>)</span><br></pre></td></tr></table></figure>
<p>代理对象和被代理对象都提供setSrc方法，所以任何使用本体对象的场景都可以无缝切换成代理对象。</p>
<p>应用场景：合并http请求，惰性加载文件。</p>
<h3 id="缓存代理"><a href="#缓存代理" class="headerlink" title="缓存代理"></a>缓存代理</h3><p>为一些开销大的运算缓存结果，下次运算时如果参数一致，直接从缓存池中返回之前计算的结果。</p>
<p>example：缓存乘积运算</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mult = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; i++)&#123;</span><br><span class="line">        result = result * <span class="built_in">arguments</span>[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> proxyMult = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cache = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.join.call(<span class="built_in">arguments</span>,<span class="string">','</span>);</span><br><span class="line">        <span class="keyword">if</span>(args <span class="keyword">in</span> cache)&#123;</span><br><span class="line">            <span class="keyword">return</span> cache[args];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cache[args] = mult.apply(<span class="keyword">this</span>.arguments)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line">proxyMult(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)     <span class="comment">// 6 mult函数计算得出</span></span><br><span class="line">proxyMult(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)     <span class="comment">// 6 proxyMult从缓存中取出之前的结果</span></span><br></pre></td></tr></table></figure>
<h2 id="发布-订阅（观察者）模式"><a href="#发布-订阅（观察者）模式" class="headerlink" title="发布-订阅（观察者）模式"></a>发布-订阅（观察者）模式</h2><p>定义对象间一种一对多的依赖关系，当一个对象（发布者）的状态发生改变时，所有依赖于它的对象（订阅者）都将得到通知。在js中事件模型即是。</p>
<p>思路：1，指定发布者。2，为发布者添加缓存列表，存放订阅者的回调。3，发布消息时遍历缓存列表。</p>
<h3 id="简单订阅-发布实现："><a href="#简单订阅-发布实现：" class="headerlink" title="简单订阅-发布实现："></a>简单订阅-发布实现：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> publisher = &#123;&#125;;						<span class="comment">// 定义发布者</span></span><br><span class="line">publisher.clientList = [];				 <span class="comment">// 定义缓存池</span></span><br><span class="line">publisher.listen = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;    <span class="comment">// 订阅方法</span></span><br><span class="line">    <span class="keyword">this</span>.clientList.push(callback);</span><br><span class="line">&#125;</span><br><span class="line">publisher.trigger = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;			  <span class="comment">// 发布消息</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>,fn; fn = <span class="keyword">this</span>.clientList[i++]; )&#123;</span><br><span class="line">        fn.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> subscriber = &#123;							<span class="comment">// 定义订阅者</span></span><br><span class="line">    name:<span class="string">'xcola'</span>,</span><br><span class="line">    subscribe:<span class="function"><span class="keyword">function</span>(<span class="params">info</span>)</span>&#123;				 <span class="comment">// 订阅的回调</span></span><br><span class="line">        <span class="built_in">console</span>.log(info);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">publisher.listen(subscriber.subscribe);		  <span class="comment">// 将订阅者的回调传给listen函数，加入发布者的缓存池中</span></span><br><span class="line">publisher.trigger(<span class="string">'emmm'</span>)                     <span class="comment">// subscriber.subscribe输出“emmm”</span></span><br></pre></td></tr></table></figure>
<p>在此种实现下，订阅者会收到所有发布者的消息，若添加一个标识，指定订阅哪种类型的消息，这样就不会给订阅者带来不必要的困扰。</p>
<h3 id="指定订阅类型"><a href="#指定订阅类型" class="headerlink" title="指定订阅类型"></a>指定订阅类型</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">publisher.listen = <span class="function"><span class="keyword">function</span>(<span class="params">key,callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">this</span>.clientList[key])&#123;			<span class="comment">// 如果先前不存在这种标识的发布类型则新建一个</span></span><br><span class="line">        <span class="keyword">this</span>.clientList[key] = []</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.clientList[key].push(callback);	<span class="comment">// 将回调存进对应key标识的缓存池中</span></span><br><span class="line">&#125;</span><br><span class="line">publisher.trigger = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> key = <span class="built_in">Array</span>.prototype.shift.call(<span class="built_in">arguments</span>),  <span class="comment">// 取出arguments中第一个参数，即key</span></span><br><span class="line">        fns = <span class="keyword">this</span>.clientList[key];		 <span class="comment">// 取出对应key的缓存池</span></span><br><span class="line">    <span class="keyword">if</span>(!fns || fns.length === <span class="number">0</span>)&#123;			<span class="comment">// 如果没有回调返回false</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>,fn; fn = <span class="keyword">this</span>.clientList[i++]; )&#123;</span><br><span class="line">        fn.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>)		<span class="comment">// 遍历缓存池，调用回调函数传递消息</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">publisher.listen(<span class="string">'xcola'</span>,subscriber.subscribe);</span><br><span class="line">publisher.trigger(<span class="string">'xcola'</span>,<span class="string">'emmm'</span>)              <span class="comment">// 只有标识为xcola的回调会收到emmm</span></span><br></pre></td></tr></table></figure>
<h3 id="添加取消订阅功能"><a href="#添加取消订阅功能" class="headerlink" title="添加取消订阅功能"></a>添加取消订阅功能</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">publiser.remove = <span class="function"><span class="keyword">function</span>(<span class="params">key,callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> fns = <span class="keyword">this</span>.clientList[key];        <span class="comment">// 取出对应key的缓存池</span></span><br><span class="line">    <span class="keyword">if</span>(!fns)&#123;                             <span class="comment">// 如果缓存池不存在，则返回false</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!callback)&#123;					<span class="comment">// 如果没有指定对应key的callback，则清除对应key的所有订阅回调</span></span><br><span class="line">        fns &amp;&amp; (fns.length === <span class="number">0</span>);		<span class="comment">// 只有fns不为空才会执行fns.length === 0</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = fns.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>;i--)&#123;</span><br><span class="line">            <span class="keyword">var</span> _callback = fns[i];</span><br><span class="line">            <span class="keyword">if</span>(_callback == callback)&#123;</span><br><span class="line">                fns.splice(i,<span class="number">1</span>);		<span class="comment">// 删除缓存池中找到的对应的订阅callback</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="给对象动态的添加订阅发布功能"><a href="#给对象动态的添加订阅发布功能" class="headerlink" title="给对象动态的添加订阅发布功能"></a>给对象动态的添加订阅发布功能</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> event = &#123;                        <span class="comment">// 将所有方法封装在一个对象中</span></span><br><span class="line">    clientLish:[],</span><br><span class="line">    listen:<span class="function"><span class="keyword">function</span>(<span class="params">key,callback</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(!<span class="keyword">this</span>.clientList[key])&#123;</span><br><span class="line">                    <span class="keyword">this</span>.clientList[key] = []</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">this</span>.clientList[key].push(callback);</span><br><span class="line">            &#125;,</span><br><span class="line">    trigger:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="keyword">var</span> key = <span class="built_in">Array</span>.prototype.shift.call(<span class="built_in">arguments</span>),</span><br><span class="line">                    fns = <span class="keyword">this</span>.clientList[key];</span><br><span class="line">                <span class="keyword">if</span>(!fns || fns.length === <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>,fn; fn = <span class="keyword">this</span>.clientList[i++]; )&#123;</span><br><span class="line">                    fn.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">    remove:<span class="function"><span class="keyword">function</span>(<span class="params">key,callback</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> fns = <span class="keyword">this</span>.clientList[key];</span><br><span class="line">            <span class="keyword">if</span>(!fns)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!callback)&#123;</span><br><span class="line">                fns &amp;&amp; (fns.length === <span class="number">0</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">let</span> i = fns.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>;i--)&#123;</span><br><span class="line">                    <span class="keyword">var</span> _callback = fns[i];</span><br><span class="line">                    <span class="keyword">if</span>(_callback == callback)&#123;</span><br><span class="line">                        fns.splice(i,<span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> installEvent = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;			<span class="comment">// 为某个对象安装订阅发布功能</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> event)&#123;					<span class="comment">// 遍历event的方法，为传入的对象添加event中存放的方法</span></span><br><span class="line">        obj[i] = event[i]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>​                                                                                                                                        于2018/10/14 夜</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href="javascript:void(0)" class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/前端/">前端</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/学习笔记/">学习笔记</a>, <a href="/tags/JavaScript设计模式与开发实践/">JavaScript设计模式与开发实践</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-07-27T00:37:21.000Z"><a href="/2018/07/27/部分面试知识点梳理/">2018-07-27</a></time>
      
      
  
    <h1 class="title"><a href="/2018/07/27/部分面试知识点梳理/">部分面试知识点梳理</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="移动端适配"><a href="#移动端适配" class="headerlink" title="移动端适配"></a>移动端适配</h2><h3 id="响应式布局"><a href="#响应式布局" class="headerlink" title="响应式布局"></a>响应式布局</h3><p>一套css方案兼容多个终端，而不是为了每个特定终端重写css方案。</p>
<p>1，添加视口meta标签，重写默认视口 </p>
<p><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</code></p>
<p>2，媒体查询</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">media</span> (max-width: <span class="number">480px</span>)&#123;...&#125;</span><br><span class="line">@<span class="keyword">media</span> (max-width: <span class="number">767px</span>)&#123;...&#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">768px</span>) and (max-width: <span class="number">979px</span>)&#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>这里也有一个IE兼容性问题，IE不支持媒体查询，因此需要一个js解决方案。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">!–[if</span> <span class="attr">lt</span> <span class="attr">IE</span> <span class="attr">9</span>]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">”../../css3-mediaqueries.js”</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">![endif]–</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="流式布局（百分比布局）"><a href="#流式布局（百分比布局）" class="headerlink" title="流式布局（百分比布局）"></a>流式布局（百分比布局）</h3><p>页面元素的宽度按照屏幕分辨率进行适配调整，但整体布局不变。 宽度使用百分比定义，但是高度和文字大小等大都是用px来固定 ，因此在大屏幕下不太协调。</p>
<h3 id="rem布局（等比缩放、弹性布局）"><a href="#rem布局（等比缩放、弹性布局）" class="headerlink" title="rem布局（等比缩放、弹性布局）"></a>rem布局（等比缩放、弹性布局）</h3><blockquote>
<p>rem和em的区别：rem,em都是顺应不同网页字体大小展现而产生的。其中，em是相对其父元素，在实际应用中相对而言会带来很多不便；而rem是始终相对于html大小，即页面根元素。 </p>
</blockquote>
<p>由于页面元素的大小单位换成了rem，而rem又基于html根字号计算，因此应先确定根字号的值。</p>
<p>使用淘宝<em>flexible.js</em>适配，在head标签中引入，不需设置meta标签重置默认视口，交给flexible.js自动处理。</p>
<p>除了font-size之外的尺寸均写成rem单位，根据设计稿大小和设计稿的基准字体换算。sass、less、sublime插件可以方便的在px和rem单位中转换。</p>
<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><p>1，请减少HTTP请求 ，合并图片为精灵图，合并css和js文件，懒加载等。</p>
<p>2，重绘和回流。尽量使用class为页面元素变换属性，每设置一次style属性将导致一次回流，重新计算布局和大小等样式。无法避免回流时，使用DocumentFragment 缓存操作。</p>
<p>3，减少DOM操作。循环创建DOM时可将节点缓存在变量中，循环结束时一次性写入。使用DocumentFragment 缓存操作。</p>
<p>4，使用CDN加速（内容分发网络）。CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。 引自百度百科。</p>
<p>5，页面缓存。通过manifest文件在客户端本地缓存一部分公共资源或者变动较少的资源，达到提升页面载入速度，降低服务器压力的效果。</p>
<p>6，减少DNS查找，减少重定向。浏览器可以并行下载，但多个主机名需要多次DNS查询，因此将主机名控制在2-4个之内。重定向将导致浏览器再次重复解析、请求的过程，因此尽量避免。</p>
<h2 id="懒加载"><a href="#懒加载" class="headerlink" title="懒加载"></a>懒加载</h2><p>作为服务器前端的优化，减少请求数或延迟请求数。 </p>
<p>方式：</p>
<ul>
<li>使用setTimeOut或setInterval进行加载延迟. </li>
<li>符合某些条件或者触发了某些事件才开始异步下载 </li>
<li>仅加载用户可以看到的区域，这个主要由监控滚动条来实现，一般会在距用户看到某图片前一定距离遍开始加载 </li>
</ul>
<p>补充：</p>
<p>1，屏幕可视区域大小</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">**原生方法**：         <span class="built_in">window</span>.innerHeight||<span class="built_in">document</span>.documentElement.clientHeight||<span class="built_in">document</span>.body.clientHeight </span><br><span class="line">**jQuery方法**： </span><br><span class="line">$(<span class="built_in">window</span>).height();</span><br></pre></td></tr></table></figure>
<p>2，浏览器窗口顶端与文档顶部距离（滚动条滚动距离）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">**原生方法**：     <span class="built_in">window</span>.pagYoffset||<span class="built_in">document</span>.documentElement.scrollTop||<span class="built_in">document</span>.body.scrollTop </span><br><span class="line">**jQuery方法**：</span><br><span class="line">$(<span class="built_in">document</span>).scrollTop();</span><br></pre></td></tr></table></figure>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>1，有权访问另一个函数作用域中的变量的的函数。 </p>
<p>2，能够读取其他函数内部变量的函数。 </p>
<p>3，函数和声明该函数的词法环境的组合。 </p>
<p>4，当函数可以记住并访问所在的词法作用域时，就产生了闭包，即使函数是在当前词法作用域之外执行。 </p>
<p>分析参见博客<a href="http://blog.xcola.top/2018/05/23/%E5%AF%B9%E9%97%AD%E5%8C%85%E7%9A%84%E7%90%86%E8%A7%A3/" target="_blank" rel="noopener">对闭包的理解</a>。</p>
<p>优点：</p>
<ul>
<li>保护函数内的变量安全,加强了封装性  </li>
<li>在内存中维持一个变量不被销毁，设计私有的方法和变量</li>
</ul>
<p>缺点：</p>
<ul>
<li>常驻内存 ，易造成内存泄漏</li>
</ul>
<h2 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h2><p>在用构造函数构造对象时，构造出的对象每个都是相互独立的，既不互相影响，也都有自己属性和方法的副本，没有共享可言，也浪费了资源。为了解决这个问题，每个函数都有一个prototype属性，这里记录了 所有实例对象需要共享的属性和方法，而那些不需要共享的数据或者方法，则还放在构造函数中去。而实例对象一经创建，<code>__proto__</code>自动引用prototype中记录的属性和方法。 prototype像是实例对象的原型，实例则像是继承了prototype对象。 <code>__proto__</code>按照继承关系层层引用，形成一条原型链，最终指向null。</p>
<h2 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h2><h3 id="cors"><a href="#cors" class="headerlink" title="cors"></a>cors</h3><p>cors支持post、get两种请求方式。支持cors的服务器对跨域请求响应时将添加Access-Control-Allow-Origin响应头 ，浏览器会分析该响应头中所标示的内容。如果其包含了当前页面所在的域，那么浏览器就将知道这是一个被允许的跨域访问，从而不再根据同源策略来限制用户对该数据的访问。</p>
<h3 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h3><p>JSONP通过在文档中嵌入一个<code>&lt;script&gt;</code>标记来从另一个域中返回数据。script标签的src属性不受同源策略限制，利用这一点可以实现跨域请求数据，由此而来的缺点也显而易见——仅支持get请求。</p>
<h2 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h2><p><em>webpack</em> 是一个现代 JavaScript 应用程序的<em>静态模块打包器(module bundler)</em>。当 webpack 处理应用程序时，它会递归地构建一个<em>依赖关系图(dependency graph)</em>，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 <em>bundle</em>。 </p>
<h3 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">        entry: __dirname + <span class="string">"/app/main.js"</span>, <span class="comment">//入口文件</span></span><br><span class="line">        output: &#123;						 <span class="comment">//出口</span></span><br><span class="line">            path: __dirname + <span class="string">"/build"</span>,</span><br><span class="line">            filename: <span class="string">"bundle-[hash].js"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        devtool: <span class="string">'none'</span>,</span><br><span class="line">        devServer: &#123;</span><br><span class="line">            contentBase: <span class="string">"./public"</span>, <span class="comment">//本地服务器所加载的页面所在的目录</span></span><br><span class="line">            historyApiFallback: <span class="literal">true</span>, <span class="comment">//不跳转</span></span><br><span class="line">            inline: <span class="literal">true</span>,</span><br><span class="line">            hot: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="built_in">module</span>: &#123;</span><br><span class="line">            rules: [&#123;</span><br><span class="line">                    test: <span class="regexp">/(\.jsx|\.js)$/</span>,</span><br><span class="line">                    use: &#123;</span><br><span class="line">                        loader: <span class="string">"babel-loader"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                    use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">                        fallback: <span class="string">"style-loader"</span>,</span><br><span class="line">                        use: [&#123;</span><br><span class="line">                            loader: <span class="string">"css-loader"</span>,</span><br><span class="line">                            options: &#123;</span><br><span class="line">                                modules: <span class="literal">true</span>,</span><br><span class="line">                                localIdentName: <span class="string">'[name]__[local]--[hash:base64:5]'</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;, &#123;</span><br><span class="line">                            loader: <span class="string">"postcss-loader"</span></span><br><span class="line">                        &#125;],</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: __dirname + <span class="string">"/app/index.tmpl.html"</span> <span class="comment">//new 一个这个插件的实例，并传入相关的参数</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> webpack.optimize.OccurrenceOrderPlugin(),</span><br><span class="line">        <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(),</span><br><span class="line">        <span class="keyword">new</span> ExtractTextPlugin(<span class="string">"style.css"</span>)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>bable：编译JavaScript </li>
<li>devserver ：开启一个本地服务环境</li>
<li>Loaders：调用外部的脚本或工具，实现对不同格式的文件的处理 （Sass - css）</li>
<li>Plugins：拓展Webpack功能，在整个构建过程中生效，执行相关的任务 </li>
</ul>
<h2 id="前端存储"><a href="#前端存储" class="headerlink" title="前端存储"></a>前端存储</h2><h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><p>cookie是由服务器发给客户端的信息，以文本的形式保存在客户端本地，客户端每次发起请求时将在header里携带cookie一起发送到服务端。由此弥补了http协议无状态的缺陷，服务端可以得知用户的身份信息，跟踪会话。</p>
<p>cookie受同源策略限制，且存在有效期、路径、httponly（JavaScript不能读取httponly的cookie）、secure（只使用https协议发送，防止中间人攻击）等属性，JavaScript操作cookie需要自己封装函数。</p>
<p>此外，cookie的数量和大小也有限制，由于每次请求都会带上cookie，因此过多的cookie将导致性能下降。</p>
<h3 id="sessionStorage"><a href="#sessionStorage" class="headerlink" title="sessionStorage"></a>sessionStorage</h3><p>sessionStorage 是HTML5新增的一个会话存储对象，用于临时保存同一窗口(或标签页)的数据，在关闭窗口或标签页之后将会删除这些数据。 sessionStorage只在本地生效，不会随http请求发送到服务端，sessionStorage同样存在存储大小限制，5MB左右。sessionStorage适合用于SPA单页应用，在不同组件中传值。</p>
<p>sessionStorage有原生的操作方法，不需要自己动手封装。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sessionStorage.setItem(key , value);  <span class="comment">//写入</span></span><br><span class="line">sessionStorage.getItem(key);  <span class="comment">//读取</span></span><br><span class="line">sessionStorage.removeItem(key);  <span class="comment">//移除</span></span><br><span class="line">sessionStorage.clear();  <span class="comment">//清除所有值</span></span><br></pre></td></tr></table></figure>
<h3 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h3><p>localStorage也是html5新增的特性，实现本地存储。不同于cookie，localStorage的存储大小为5MB左右，与sessionStorage唯一不同的是，localStorage是永久的，会话结束也不会被销毁，其语法也与sessionStorage相似。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">localStorage.setItem(key, value);</span><br><span class="line">localStorage.getItem(key);</span><br><span class="line">localStorage.removeItem(key);</span><br><span class="line">localStorage.clear();</span><br></pre></td></tr></table></figure>
<h3 id="indexedDB-amp-WebSql"><a href="#indexedDB-amp-WebSql" class="headerlink" title="indexedDB &amp; WebSql"></a>indexedDB &amp; WebSql</h3><p>实现了一个前端的持久化数据库。</p>
<h2 id="BFC（块级格式化上下文）"><a href="#BFC（块级格式化上下文）" class="headerlink" title="BFC（块级格式化上下文）"></a>BFC（块级格式化上下文）</h2><p>一个独立的渲染区域，只有块级元素参与， 它规定了内部的块级元素如何布局，并且与这个区域外部毫不相干。 </p>
<h3 id="生成BFC"><a href="#生成BFC" class="headerlink" title="生成BFC"></a>生成BFC</h3><ul>
<li>根元素</li>
<li>浮动元素</li>
<li>position为absolute或fixed</li>
<li>display为inline-block, table-cell, table-caption, flex, inline-flex</li>
<li>overflow不为visible</li>
</ul>
<p>参考：<a href="http://www.cnblogs.com/lhb25/p/inside-block-formatting-ontext.html" target="_blank" rel="noopener">http://www.cnblogs.com/lhb25/p/inside-block-formatting-ontext.html</a></p>
<h2 id="Web攻击"><a href="#Web攻击" class="headerlink" title="Web攻击"></a>Web攻击</h2><h3 id="XSS（跨站脚本攻击-）"><a href="#XSS（跨站脚本攻击-）" class="headerlink" title="XSS（跨站脚本攻击 ）"></a>XSS（跨站脚本攻击 ）</h3><p>攻击者向Web页面中插入恶意Script代码，当用户浏览该页时，嵌入其中的Script代码会被执行，从而达到恶意攻击用户的目的。 </p>
<p>XSS是由于浏览器直接执行不可信的用户输入导致的，包括存储型和反射型两种，反射型XSS攻击没有将恶意代码保存到网站，通过引诱用户点击触发。存储型XSS将恶意代码保存在网站服务器中，每当用户访问网站时触发，因此危害更大。</p>
<p>防御方法：前端对用户表单提交的数据进行过滤，检测用户输入是否含有非法内容，如&lt;&gt;;&amp;+等，同时后端应对前端的提交内容做进一步的转义处理，</p>
<h3 id="CSRF（跨站请求伪造-）"><a href="#CSRF（跨站请求伪造-）" class="headerlink" title="CSRF（跨站请求伪造 ）"></a>CSRF（跨站请求伪造 ）</h3><p>XSS利用受信任的用户，恶意代码由攻击者提交，而CSRF利用受信任的网站，构造好恶意代码后由受害用户提交。CSRF漏洞允许攻击者利用正常用户的身份发起一个请求，达到恶意修改密码、修改绑定邮箱、代替支付等行为。</p>
<p>防御方法：为每个用户会话随机生成一个token，保存在session中，每次提交时验证服务端的session与客户端的token是否相同。</p>
<p>如果事先XSS拿到cookie，再去CSRF。。</p>
<h2 id="服务端推送"><a href="#服务端推送" class="headerlink" title="服务端推送"></a>服务端推送</h2><h3 id="ajax轮询"><a href="#ajax轮询" class="headerlink" title="ajax轮询"></a>ajax轮询</h3><p>每隔一段时间发送一次ajax请求，直到接到数据为止。会对造成服务端压力，发送大量无用请求。</p>
<h3 id="ajax长轮询"><a href="#ajax长轮询" class="headerlink" title="ajax长轮询"></a>ajax长轮询</h3><p>发送一次请求，若没有新消息则服务端将请求挂起，直到有新消息再返回。会造成服务端进程占用，资源不能即时释放。</p>
<h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h3><p>先利用http协议握手，随后使用TCP连接，全双工通信。</p>
<p>———————–8月20日更新———————-</p>
<p>学历问题签合同的时候被某外包拒签。这个事情告诉我们不确定的事情尽量先处理完。。</p>
<p>此前面试通过4家公司，收到的反馈有对项目规范化流程不熟练，项目经验略少且偏向展示，没有复杂交互经验，有些细节知识掌握不到位，停留在死记硬背的水平上。电话面试的时候真应该录音，方便整理、查漏补缺，应对下一次面试。</p>
<p>————————补充部分面试经验——————–</p>
<p>实际上面试过程中，我前面整理的知识点都有问到，算作是基础的部分，但只是简单的梳理，对各部分知识的了解应该能自己阐述明白，做到条理清晰，用词规范准确最好。</p>
<h2 id="ES6语法"><a href="#ES6语法" class="headerlink" title="ES6语法"></a>ES6语法</h2><p>几乎每次面试必问。。答出let，const声明变量、模板字符串、箭头函数、class声明类、对象扩展、数组扩展、promise、async（await）即可。</p>
<h3 id="let、const声明变量"><a href="#let、const声明变量" class="headerlink" title="let、const声明变量"></a>let、const声明变量</h3><p>let声明变量产生块级作用域和暂时性死区，const声明常量不可更改其值，但const声明对象可更改对象的属性，答出其原理。</p>
<h3 id="字符串扩展"><a href="#字符串扩展" class="headerlink" title="字符串扩展"></a>字符串扩展</h3><p>可保留字符串内的回车换行，内嵌变量或者函数。</p>
<h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><p>箭头函数和普通函数的区别，this指向问题。箭头函数的函数体中的this仍指向其所在的上下文环境，而普通函数内部的this指向将随函数的调用者的改变而改变。</p>
<h3 id="class声明类"><a href="#class声明类" class="headerlink" title="class声明类"></a>class声明类</h3><p>其原理仍然是js的原型链继承。阐述时理清prototype，<code>__proto__</code>，constructor等指针的指向和继承关系。</p>
<h3 id="对象扩展"><a href="#对象扩展" class="headerlink" title="对象扩展"></a>对象扩展</h3><p>直接在对象中写变量，属性值为变量值，属性名为变量名。</p>
<h3 id="数组扩展"><a href="#数组扩展" class="headerlink" title="数组扩展"></a>数组扩展</h3><p><code>...</code>运算符实现数组或者对象的克隆、合并等等。这部分涉及到的浅拷贝和深拷贝的理解，理解为主。此外问到过数组的迭代map、foreach的区别，fliter方法等等。</p>
<h3 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h3><p>promise问的相当多，js实现异步是回调和promise，promise的思想和原理需要简单过目记忆，链式调用的原理，race方法和all方法使用的场景也有问到。</p>
<h3 id="async-amp-await"><a href="#async-amp-await" class="headerlink" title="async &amp; await"></a>async &amp; await</h3><p>放在一起说，ES6用迭代函数generator实现了程序中断，在generator函数的内部使用yield和next等方法控制中断和恢复程序执行，async和await是generator函数的一套语法糖，合并了复杂的语法实现简化语法。理解不了的话这段话可以背一下。。</p>
<h2 id="react"><a href="#react" class="headerlink" title="react"></a>react</h2><h3 id="render在什么情况下会被触发"><a href="#render在什么情况下会被触发" class="headerlink" title="render在什么情况下会被触发"></a>render在什么情况下会被触发</h3><p>三个情况，props改变，state改变，父组件状态改变。父组件更新子组件会被重新render，在子组件的shouldComponentUpdate生命周期中返回false阻止回流，做一部分性能优化。</p>
<p>这里涉及一个纯组件的概念，通过继承一个特殊的类pureComponent来实现自动性能优化，在状态改变时对虚拟DOM做一层浅比较，然后自动判断是否需要重新渲染。详细原理可以自行百度。</p>
<h3 id="connect函数"><a href="#connect函数" class="headerlink" title="connect函数"></a>connect函数</h3><p>将组件的展示部分和逻辑部分链接起来，返回一个高阶组件。connect函数接受两个参数mapStateToProps和mapDispatchToProps分别将状态和dispatch函数映射到当前组件的props中，同时返回一个函数，这个函数接收当前组件为参数，最终返回一个将逻辑和展示组合在一起的高阶组件。高阶组件的本质是函数。理解不了可以背一背。</p>
<h3 id="react-redux的流程"><a href="#react-redux的流程" class="headerlink" title="react-redux的流程"></a>react-redux的流程</h3><p>官网上的说明就不错。redux将所有需要管理的状态放在一个单一的store中，改变state的唯一方法是触发一个action，action是一个普通对象，描述了状态应该怎样改变，dispatch函数将action提交给reduce函数，reducer函数应该是一个纯函数，接收到action后将新状态与老状态合并，返回一个新的状态，触发组件的更新。理解不了可以背一背。</p>
<h3 id="diff算法"><a href="#diff算法" class="headerlink" title="diff算法"></a>diff算法</h3><p>react框架本身不知道哪个组件做了更改需要重新渲染，因此render函数需要靠setState或者接受新props来触发，通过diff算法在虚拟DOM中统计比较发生变化的组件，将需要重新渲染的组件标记为脏，然后根据更新后的虚拟DOM重新渲染发生变化的组件。觉得不够详细可以再自己整理。虚拟DOM什么的自己试着说两遍。</p>
<h2 id="antd"><a href="#antd" class="headerlink" title="antd"></a>antd</h2><p>antd可以着重去看它的表单控件和表格控件，做<strong>输入合法性验证和独立校验</strong>的方法，antd经常遇到的问题在于若和设计稿有不符，怎么去修改antd组件的样式。</p>
<p>主题方面，antd可以自己设计主题色调，圆角等，官方文档里有说明。第三方库<strong>styled-components</strong>也可以自定义antd组件样式。其他覆盖className的技巧有（mei）兴（shi）趣（gan）可以自己去segmentfault上找。</p>
<p>这部分结合自己的项目经验去找去看，问的还是相当多的。</p>
<h2 id="git操作"><a href="#git操作" class="headerlink" title="git操作"></a>git操作</h2><p>必会的基础，git add 、commit、push、branch、checkout、merge、pull、status、log每个命令的作用，工作时提交的流程，合并分支出错的解决办法：根据报错找到错误位置手动合并。</p>
<h2 id="项目具体"><a href="#项目具体" class="headerlink" title="项目具体"></a>项目具体</h2><p>对自己简历上写的项目的业务逻辑，功能和技术要点要了然于胸，多看几个项目功能的具体实践甚至是github上去找几个项目实践来看看，比如登陆注册，web存储，redux应用，表单控件验证，表格操作，要通过看代码理清楚具体是怎么实现的，说出来才有可信度。</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href="javascript:void(0)" class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/前端/">前端</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/面试笔记/">面试笔记</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-07-20T00:34:52.000Z"><a href="/2018/07/20/react简记/">2018-07-20</a></time>
      
      
  
    <h1 class="title"><a href="/2018/07/20/react简记/">react简记</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="目录结构和流程"><a href="#目录结构和流程" class="headerlink" title="目录结构和流程"></a>目录结构和流程</h2><p>create-react-app生成项目。目录树。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">│  .gitignore</span><br><span class="line">│  config-overrides.js</span><br><span class="line">│  package-lock.json</span><br><span class="line">│  package.json</span><br><span class="line">│  README.md</span><br><span class="line">│  </span><br><span class="line">├─public</span><br><span class="line">│      favicon.ico</span><br><span class="line">│      index.html</span><br><span class="line">│      manifest.json</span><br><span class="line">│      </span><br><span class="line">├─screenshot</span><br><span class="line">│      bookPage.jpg</span><br><span class="line">│      eventPage.jpg</span><br><span class="line">│      eventPage01.jpg</span><br><span class="line">│      homePage.jpg</span><br><span class="line">│      repoPage.jpg</span><br><span class="line">│      </span><br><span class="line">└─src</span><br><span class="line">    │  App.js</span><br><span class="line">    │  index.js</span><br><span class="line">    │  registerServiceWorker.js</span><br><span class="line">    │  </span><br><span class="line">    ├─assets</span><br><span class="line">    │  └─images</span><br><span class="line">    │          allbooks0.svg</span><br><span class="line">    │          allbooks1.svg</span><br><span class="line">    │          buy0.svg</span><br><span class="line">    │          buy1.svg</span><br><span class="line">    │          comment.png</span><br><span class="line">    │          data.png</span><br><span class="line">    │          like.png</span><br><span class="line">    │          link.svg</span><br><span class="line">    │          location.png</span><br><span class="line">    │          logo.svg</span><br><span class="line">    │          me.png</span><br><span class="line">    │          me0.svg</span><br><span class="line">    │          me1.svg</span><br><span class="line">    │          outline.png</span><br><span class="line">    │          star.png</span><br><span class="line">    │          three.png</span><br><span class="line">    │          yy.png</span><br><span class="line">    │          </span><br><span class="line">    ├─Components</span><br><span class="line">    │  ├─Books</span><br><span class="line">    │  │  │  index.css</span><br><span class="line">    │  │  │  index.js</span><br><span class="line">    │  │  │  index.scss</span><br><span class="line">    │  │  │  </span><br><span class="line">    │  │  ├─Allbooks</span><br><span class="line">    │  │  │      index.css</span><br><span class="line">    │  │  │      index.js</span><br><span class="line">    │  │  │      index.scss</span><br><span class="line">    │  │  │      </span><br><span class="line">    │  │  ├─Bought</span><br><span class="line">    │  │  │      index.css</span><br><span class="line">    │  │  │      index.js</span><br><span class="line">    │  │  │      index.scss</span><br><span class="line">    │  │  │      </span><br><span class="line">    │  │  └─Me</span><br><span class="line">    │  │          index.css</span><br><span class="line">    │  │          index.js</span><br><span class="line">    │  │          index.scss</span><br><span class="line">    │  │          </span><br><span class="line">    │  ├─Common</span><br><span class="line">    │  │  └─Navbar</span><br><span class="line">    │  │          index.css</span><br><span class="line">    │  │          index.js</span><br><span class="line">    │  │          index.scss</span><br><span class="line">    │  │          </span><br><span class="line">    │  ├─Event</span><br><span class="line">    │  │  │  index.css</span><br><span class="line">    │  │  │  index.js</span><br><span class="line">    │  │  │  index.scss</span><br><span class="line">    │  │  │  </span><br><span class="line">    │  │  ├─all</span><br><span class="line">    │  │  │      index.css</span><br><span class="line">    │  │  │      index.js</span><br><span class="line">    │  │  │      index.scss</span><br><span class="line">    │  │  │      </span><br><span class="line">    │  │  ├─beijing</span><br><span class="line">    │  │  │      index.css</span><br><span class="line">    │  │  │      index.js</span><br><span class="line">    │  │  │      index.scss</span><br><span class="line">    │  │  │      </span><br><span class="line">    │  │  ├─guangzhou</span><br><span class="line">    │  │  │      index.css</span><br><span class="line">    │  │  │      index.js</span><br><span class="line">    │  │  │      index.scss</span><br><span class="line">    │  │  │      </span><br><span class="line">    │  │  ├─hangzhou</span><br><span class="line">    │  │  │      index.css</span><br><span class="line">    │  │  │      index.js</span><br><span class="line">    │  │  │      index.scss</span><br><span class="line">    │  │  │      </span><br><span class="line">    │  │  ├─shanghai</span><br><span class="line">    │  │  │      index.css</span><br><span class="line">    │  │  │      index.js</span><br><span class="line">    │  │  │      index.scss</span><br><span class="line">    │  │  │      </span><br><span class="line">    │  │  └─shenzhen</span><br><span class="line">    │  │          index.css</span><br><span class="line">    │  │          index.js</span><br><span class="line">    │  │          index.scss</span><br><span class="line">    │  │          </span><br><span class="line">    │  ├─Home</span><br><span class="line">    │  │      index.css</span><br><span class="line">    │  │      index.js</span><br><span class="line">    │  │      index.scss</span><br><span class="line">    │  │      </span><br><span class="line">    │  ├─Pins</span><br><span class="line">    │  │  │  index.css</span><br><span class="line">    │  │  │  index.js</span><br><span class="line">    │  │  │  index.scss</span><br><span class="line">    │  │  │  </span><br><span class="line">    │  │  ├─Recommended</span><br><span class="line">    │  │  │      index.css</span><br><span class="line">    │  │  │      index.js</span><br><span class="line">    │  │  │      index.scss</span><br><span class="line">    │  │  │      </span><br><span class="line">    │  │  └─Subscribed</span><br><span class="line">    │  │          index.css</span><br><span class="line">    │  │          index.js</span><br><span class="line">    │  │          index.scss</span><br><span class="line">    │  │          </span><br><span class="line">    │  └─Repos</span><br><span class="line">    │          index.css</span><br><span class="line">    │          index.js</span><br><span class="line">    │          index.scss</span><br><span class="line">    │          </span><br><span class="line">    ├─Redux</span><br><span class="line">    │  │  index.js</span><br><span class="line">    │  │  </span><br><span class="line">    │  └─Reducer</span><br><span class="line">    │          bookListReducer.js</span><br><span class="line">    │          changeTitleReducer.js</span><br><span class="line">    │          getEventBannerReducer.js</span><br><span class="line">    │          getEventDataReducer.js</span><br><span class="line">    │          getRecommendListReducer.js</span><br><span class="line">    │          getReposListReducer.js</span><br><span class="line">    │          recommendListReducer.js</span><br><span class="line">    │          </span><br><span class="line">    └─Router</span><br><span class="line">            index.js</span><br></pre></td></tr></table></figure>
<p>public中存放的index.html是项目页面，其中的<code>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code>标签包裹项目组件。src目录下index.js为入口文件，通过render函数将路由组件挂载到index.html中的<code>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code>上，在路由组件中，通过匹配路由规则，将不同的组件显示在App根组件中<code>this.props.children</code>的位置。</p>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><p>react提出了组件可以是函数的思想，构造组件有两种方式——类或函数。根据组件功能的不同，亦可划分为容器组件和展示组件。容器组件负责数据获取和状态更新等功能，而展示组件描述页面的结构和样式。</p>
<h3 id="展示组件"><a href="#展示组件" class="headerlink" title="展示组件"></a>展示组件</h3><p>通常使用函数的方法定义，除非它需要状态或者有生命周期函数性能优化等需求。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span> (<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>welcome! &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="容器组件"><a href="#容器组件" class="headerlink" title="容器组件"></a>容器组件</h3><p>通常使用类的方式定义，容器组件一般不写什么样式和页面结构，作用是向其他组件提供数据和功能，因为充当数据源的角色，所以容器组件一般都有状态。redux的操作也在容器组件中进行，并把方法和数据通过Provider提供给展示组件使用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Datalist</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            list:[]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    componentDidMount()&#123;</span><br><span class="line">        <span class="keyword">this</span>.props.getList()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过类定义的组件有更完善的功能，包括状态、render、生命周期函数、用户自定义方法、以及redux扩展的方法等。</p>
<p>用展示组件和容器组件相分离的方法编写组件，有利于理解UI和应用之间的关系。通过给展示组件传递不同属性的方法，提高了展示组件的可复用性。</p>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>react的路由是提供导航和跳转的组件。得益于jsx语法，书写路由也像在写dom结构。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = (</span><br><span class="line">	&lt;Provider store = &#123;Store&#125;&gt;</span><br><span class="line">		&lt;Router&gt;</span><br><span class="line">			&lt;App&gt;</span><br><span class="line">				&lt;Switch&gt;</span><br><span class="line">					&lt;Route path=<span class="string">"/home"</span> component=&#123;Home&#125; /&gt;</span><br><span class="line">					&lt;Route path=<span class="string">"/repos"</span> component=&#123;Repos&#125; /&gt;</span><br><span class="line">					&lt;Route path=<span class="string">"/books"</span> render=&#123;()=&gt;</span><br><span class="line">						&lt;Books&gt;</span><br><span class="line">							&lt;Switch&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/books/allbooks"</span> component=&#123;Allbooks&#125; /&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/books/bought"</span> component=&#123;Bought&#125; /&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/books/me"</span> component=&#123;Me&#125; /&gt;</span><br><span class="line">								&lt;Redirect <span class="keyword">from</span>=<span class="string">"/books"</span> to=<span class="string">"/books/allbooks"</span>/&gt;</span><br><span class="line">							&lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">						&lt;/</span>Books&gt;</span><br><span class="line">					&#125; /&gt;</span><br><span class="line">					&lt;Route path=<span class="string">"/event"</span> render=&#123;()=&gt;</span><br><span class="line">						&lt;Event&gt;</span><br><span class="line">							&lt;Switch&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/event/all"</span> component=&#123;all&#125; /&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/event/beijing"</span> component=&#123;beijing&#125; /&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/event/guangzhou"</span> component=&#123;guangzhou&#125; /&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/event/hangzhou"</span> component=&#123;hangzhou&#125; /&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/event/shenzhen"</span> component=&#123;shenzhen&#125; /&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/event/shanghai"</span> component=&#123;shanghai&#125; /&gt;</span><br><span class="line">								&lt;Redirect <span class="keyword">from</span>=<span class="string">"/event"</span> to=<span class="string">"/event/all"</span>/&gt;</span><br><span class="line">							&lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">						&lt;/</span>Event&gt;</span><br><span class="line">					&#125; /&gt;</span><br><span class="line">					&lt;Route path=<span class="string">"/pins"</span> render=&#123;()=&gt;</span><br><span class="line">						&lt;Pins&gt;</span><br><span class="line">							&lt;Switch&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/pins/recommended"</span> component=&#123;Recommended&#125; /&gt;</span><br><span class="line">								&lt;Route path=<span class="string">"/pins/subscribed"</span> component=&#123;Subscribed&#125; /&gt;</span><br><span class="line">								&lt;Redirect <span class="keyword">from</span>=<span class="string">"/pins"</span> to=<span class="string">"/pins/recommended"</span>/&gt;</span><br><span class="line">							&lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">						&lt;/</span>Pins&gt;</span><br><span class="line">					&#125; /&gt;</span><br><span class="line">					&lt;Redirect <span class="keyword">from</span>=<span class="string">"*"</span> to=<span class="string">"/home"</span>/&gt;</span><br><span class="line">					</span><br><span class="line">				&lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>App&gt;</span><br><span class="line">		&lt;<span class="regexp">/Router&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>Provider&gt;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<p>Provider组件包裹在路由最外层，为所有组件提供上下文环境，redux发出的状态和回调函数通过这个上下文环境传递和通信。</p>
<p>App组件作为根组件初始化，内部的组件通过<code>this.props.children</code> 路由容器显示在App组件中。</p>
<p>Switch开关保证同一location下只有第一个被匹配到的路由会被渲染。</p>
<p>Route组件的path属性匹配路径，component或render属性都可以指明此路由匹配的组件，但render可以被用来编写二级路由。exact属性接受一个布尔值，精确匹配会防止包容性路由匹配到路径相似的路由规则。</p>
<p>redirect重定向。</p>
<h2 id="生命周期-amp-State更新问题"><a href="#生命周期-amp-State更新问题" class="headerlink" title="生命周期&amp;State更新问题"></a>生命周期&amp;State更新问题</h2><p>react也提供生命周期函数，大致可以分为三个阶段——初始化阶段、运行阶段、销毁阶段。</p>
<h3 id="挂载阶段"><a href="#挂载阶段" class="headerlink" title="挂载阶段"></a>挂载阶段</h3><p>getDefaultProps()</p>
<p>getInitialState()</p>
<p>componentWillMount()</p>
<p>render()</p>
<p><em>在此之前DOM节点都未被渲染，也无法获取</em></p>
<p>componentDidMount()</p>
<p><em>DOM节点已被渲染，异步操作可以在这里执行</em></p>
<h3 id="更新阶段"><a href="#更新阶段" class="headerlink" title="更新阶段"></a>更新阶段</h3><p>componentWillReciveProps()</p>
<p><em>在组件接收到一个新的 prop 时被调用</em></p>
<p>shouldComponentUpdate()</p>
<p><em>返回一个布尔值。在组件接收到新的props或者state时被调用。合理使用有性能优化的效果</em></p>
<p>componentWillUpdate()</p>
<p><em>在组件接收到新的props或者state但还没有render时被调用。</em></p>
<p>render()</p>
<p>componentDidUpdate()</p>
<h3 id="销毁阶段"><a href="#销毁阶段" class="headerlink" title="销毁阶段"></a>销毁阶段</h3><p>componentWillUnmount()</p>
<p><em>组件被移除时调用</em></p>
<h3 id="setState方法"><a href="#setState方法" class="headerlink" title="setState方法"></a>setState方法</h3><p>直接修改state不会触发render更新组件，且直接修改的state会被之后setState方法提交的state状态所覆盖，造成难以预估的错误。因此正确的姿势是使用setState方法。同时也由于setState方法会触发render函数，因此在render函数中setState会陷入死循环直至溢出。</p>
<p>关于setState异步执行的问题，受教于知乎@<a href="https://www.zhihu.com/people/lucas-hc" target="_blank" rel="noopener">Lucas HC</a> 的<a href="https://www.zhihu.com/question/66749082/answer/246217812" target="_blank" rel="noopener">回答</a>。setState在react合成事件中触发是异步更新的，也就是说，setState后state并不会立即更新。setState是一个复杂的过程，不仅要更新state，也同时会根据所谓diff算法决定是否更新，如何更新，多个setState调用时还有可能需要被合并，因此被设计为延时异步更新state。</p>
<p>但如果通过js原生方法addEventListener添加一个事件，在原生事件中通过setState方法更新state，会发现state被同步更新了。也就是说，由 React 控制的事件处理过程 setState 不会同步更新 this.state，React 控制之外的情况， setState 会同步更新 this.state。</p>
<p>当然，大部分情况下在react项目中都是大量使用react合成后的组件与事件，因此setState基本上是异步执行的。</p>
<h2 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h2><p>react也没有自己的状态管理机制，单向数据流的通信方式使得组件间通信复杂麻烦。redux提供的状态管理可以追踪状态变化的发生时间和前因后果，其带来的便利性不仅体现在开发上，也体现在调试上。</p>
<h3 id="三个原则"><a href="#三个原则" class="headerlink" title="三个原则"></a>三个原则</h3><p>redux中的几个概念——state，action，reducer。state是redux要管理的状态；action是一个简单对象，描述了一个行为；reducer接受一个action，按照action的描述返回一个新的状态。在这个过程中，redux遵循三个原则：</p>
<ul>
<li><p>单一数据源——整个应用的state同一存在于一个唯一的store中。</p>
</li>
<li><p>state只读——state不能直接修改，必须通过提交一个action的方式变更。</p>
</li>
<li><p>reducer是纯函数——reducer接受action和state，返回新的state。</p>
</li>
</ul>
<p><em>纯函数的概念：</em></p>
<blockquote>
<ul>
<li>给定相同的输入(传入值)，一定会返回相同输出值结果(返回值)</li>
<li>不会产生副作用</li>
<li>不依赖任何外部的状态</li>
</ul>
</blockquote>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><h4 id="在路由中"><a href="#在路由中" class="headerlink" title="在路由中"></a>在路由中</h4><p>react-redux通过props读取状态和调用函数，因此需要在路由的最外层包裹一个Provider容器提供store。若使用常见的父子通信传递props，势必要将props挂载到传递路径中的每一个组件上，因此采用provider组件提供context上下文环境，有状态管理需求的组件通过上下文挂载props属性。</p>
<h4 id="在组件中"><a href="#在组件中" class="headerlink" title="在组件中"></a>在组件中</h4><p>react-redux提供connect方法，将UI部分和逻辑部分连接在一起。connect是一个高阶函数，接受两个参数并返回另一个以当前组件为参数的函数。connect的两个参数分别提供从state到组件props的映射（mapStatetoProps），和从组件到dispatch方法的映射（mapDispatchtoProps）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(</span><br><span class="line">	(state)=&gt;&#123;</span><br><span class="line">		<span class="keyword">return</span> &#123;</span><br><span class="line">			List:state.getListReducer</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		getList()&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="function">(<span class="params">dispatch</span>)=&gt;</span>&#123;</span><br><span class="line">				axios.get(<span class="string">'url.com'</span>).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">					dispatch(&#123;</span><br><span class="line">						type:<span class="string">"getList"</span>,</span><br><span class="line">						payload:res.data.d</span><br><span class="line">					&#125;);</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">)(Datalist);</span><br></pre></td></tr></table></figure>
<h5 id="mapStateToProps"><a href="#mapStateToProps" class="headerlink" title="mapStateToProps"></a>mapStateToProps</h5><p>组件通过这个参数描述自己需要从某个reducer中接受一个状态，这个状态将通过props的方式挂载在组件上。</p>
<h5 id="mapDispatchtoProps"><a href="#mapDispatchtoProps" class="headerlink" title="mapDispatchtoProps"></a>mapDispatchtoProps</h5><p>组件通过这个参数定义几个dispatch函数，用以向reducer返回一个状态，这些dispatch函数将以回调函数的形式挂载在组件上。</p>
<h4 id="redux模块中"><a href="#redux模块中" class="headerlink" title="redux模块中"></a>redux模块中</h4><p>通过combine方法合并不同的reducer函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">"redux"</span></span><br><span class="line"><span class="keyword">import</span> &#123;combineReducers,applyMiddleware,compose&#125; <span class="keyword">from</span> <span class="string">"redux"</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">"redux-thunk"</span></span><br><span class="line"><span class="keyword">import</span> promiseMiddleware <span class="keyword">from</span> <span class="string">"redux-promise"</span></span><br><span class="line"><span class="keyword">import</span> getEventDataReducer <span class="keyword">from</span> <span class="string">"./Reducer/getEventDataReducer"</span></span><br><span class="line"><span class="keyword">import</span> getRecommendListReducer <span class="keyword">from</span> <span class="string">"./Reducer/getRecommendListReducer"</span></span><br><span class="line"><span class="keyword">const</span> reducer = combineReducers(&#123;</span><br><span class="line">    getEventDataReducer,</span><br><span class="line">    getRecommendListReducer</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> composeEnhancers = <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;</span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer, composeEnhancers(</span><br><span class="line">    applyMiddleware(thunk,promiseMiddleware)</span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>
<p>createStore方法创建一个store容器，接受reducer和composeEnhancers为两个参数，composeEnhancers为解决异步action添加中间件，同时为redux浏览器调试插件提供支持。</p>
<h4 id="reducer函数"><a href="#reducer函数" class="headerlink" title="reducer函数"></a>reducer函数</h4><p>reducer接受dispatch方法传来的action，根据action的type属性判断处理方法，返回一个新的状态。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// getEventDataReducer.js</span></span><br><span class="line"><span class="keyword">const</span> getEventData = <span class="function">(<span class="params">prevstate=[],data=&#123;&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;type,payload&#125; = data;</span><br><span class="line">    <span class="keyword">switch</span>(type)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"getEventData"</span>:</span><br><span class="line">            <span class="keyword">return</span> [...prevstate,...payload];</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> prevstate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getEventData</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">暂时写到这里，日后抽空填坑。。</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href="javascript:void(0)" class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/前端/">前端</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/学习笔记/">学习笔记</a>, <a href="/tags/React/">React</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-07-05T09:13:16.000Z"><a href="/2018/07/05/vue简记/">2018-07-05</a></time>
      
      
  
    <h1 class="title"><a href="/2018/07/05/vue简记/">vue简记</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="vue-cli目录结构"><a href="#vue-cli目录结构" class="headerlink" title="vue-cli目录结构"></a>vue-cli目录结构</h2><p>npm安装vue-cli，init一个vue项目。tree生成树列表保留部分项目文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">│  .babelrc</span><br><span class="line">│  .editorconfig</span><br><span class="line">│  .gitignore</span><br><span class="line">│  .postcssrc.js</span><br><span class="line">│  index.html</span><br><span class="line">│  package.json</span><br><span class="line">│  README.md</span><br><span class="line">│  </span><br><span class="line">├─build</span><br><span class="line">│      build.js</span><br><span class="line">│      check-versions.js</span><br><span class="line">│      utils.js</span><br><span class="line">│      vue-loader.conf.js</span><br><span class="line">│      webpack.base.conf.js</span><br><span class="line">│      webpack.dev.conf.js</span><br><span class="line">│      webpack.prod.conf.js</span><br><span class="line">│      </span><br><span class="line">├─config</span><br><span class="line">│      dev.env.js</span><br><span class="line">│      index.js</span><br><span class="line">│      prod.env.js</span><br><span class="line">│      </span><br><span class="line">├─src</span><br><span class="line">│  │  App.vue</span><br><span class="line">│  │  main.js</span><br><span class="line">│  │  </span><br><span class="line">│  ├─assets</span><br><span class="line">│  │  └─images</span><br><span class="line">│  │          swipe1.png</span><br><span class="line">│  │          swipe2.png</span><br><span class="line">│  │          swipe3.png</span><br><span class="line">│  │          </span><br><span class="line">│  ├─components</span><br><span class="line">│  │  │  event.vue</span><br><span class="line">│  │  │  explore.vue</span><br><span class="line">│  │  │  invest.vue</span><br><span class="line">│  │  │  questions.vue</span><br><span class="line">│  │  │  </span><br><span class="line">│  │  └─common</span><br><span class="line">│  │          banner.vue</span><br><span class="line">│  │          navbar.vue</span><br><span class="line">│  │          </span><br><span class="line">│  ├─router</span><br><span class="line">│  │      index.js</span><br><span class="line">│  │      </span><br><span class="line">│  └─store</span><br><span class="line">│          index.js</span><br><span class="line">│          </span><br><span class="line">└─static</span><br><span class="line">        .gitkeep</span><br></pre></td></tr></table></figure>
<h3 id="bulid文件夹"><a href="#bulid文件夹" class="headerlink" title="bulid文件夹"></a>bulid文件夹</h3><p>存放编译配置文件，大部分我都看不懂，webpack通过各种编译模块将项目文件编译成浏览器可读的html、css、js等。此外，vue-cli不支持sass语法编译，因此扩展安装的sass模块也需要在webpack.base.conf.js中引入。</p>
<h3 id="config文件夹"><a href="#config文件夹" class="headerlink" title="config文件夹"></a>config文件夹</h3><p>存放项目的配置文件，其中index.js说明了一系列项目本地运行时的参数，例如端口，静态虚拟文件夹，域名，反向代理等等。</p>
<h3 id="src文件夹"><a href="#src文件夹" class="headerlink" title="src文件夹"></a>src文件夹</h3><p>这是项目中主要操作的文件夹，其中存放着资源文件（assets）、组件（components）、路由（router）、vuex状态（store）。详细分析这个文件夹。assets略去不写。</p>
<h4 id="components组件"><a href="#components组件" class="headerlink" title="components组件"></a>components组件</h4><p>这个文件夹存放vue文件，亦即单文件组件。单文件组件支持语法高亮，css，独立作用域，通过构建工具（webpack等）构建亦可以在项目中使用sass语法。common文件夹存放公用组件，如页面的导航、banner、等等。</p>
<p>项目把需求页面拆分组件，通过路由将合适的组件放进页面中，这样就形成了一个单页面应用 – 更新页面但页面不跳转。</p>
<h4 id="router路由"><a href="#router路由" class="headerlink" title="router路由"></a>router路由</h4><p>通过在文件夹内放一个index.js文件的方法省去了import中写文件名的步骤。项目在初始化时使用了vue-router，在路由模块中，先引入vue-router模块，使用vue.use注册该模块，随后导出一个router对象，其routes属性是一个数组，其中的每一个对象元素对应着一个路径和该路径对应的组件。若不指定mode属性，则默认为hash路由。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line">Vue.use(Router)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  mode:<span class="string">"history"</span>,</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/explore'</span>,</span><br><span class="line">      name: <span class="string">'explore'</span>,        </span><br><span class="line">      component: explore</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/bonus/:id'</span>,  <span class="comment">// 动态路由</span></span><br><span class="line">      name: <span class="string">'bonus'</span>,</span><br><span class="line">      component: bonus,</span><br><span class="line">      children:[&#123;			<span class="comment">// 二级路由</span></span><br><span class="line">        path:<span class="string">'products'</span>,</span><br><span class="line">        component:productsI</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path:<span class="string">'itemInfo'</span>,</span><br><span class="line">        component:itemInfo</span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>动态路由</strong>：通过 ‘ : ’标识一个动态路由，随后在组件中通过全局变量 $route.params对象取得动态路由的参数。</p>
<p><strong>二级路由</strong> ：通过children属性定义一个数组，其中存放二级路由。二级路由通过在当前一级路由组件中的路由容器<code>&lt;router-view&gt;&lt;/router-view&gt;</code>显示在当前路由页面上，实现部分页面更新。</p>
<p><strong>编程式路由</strong>：$route变量可以全局访问到，且其值为一个数组，因此可以通过向这个数组中push一个新的路由实现跳转。</p>
<h4 id="store仓库（vuex）"><a href="#store仓库（vuex）" class="headerlink" title="store仓库（vuex）"></a>store仓库（vuex）</h4><p>vuex是需要额外安装的，它为vue提供了一种状态管理模式 – 集中管理应用中共用的状态，解决了vue组件间由作用域封闭而造成的通信困难的问题。此外在开发中，vuex也提供诸如快照等更强大的调试功能。</p>
<p>vuex使用单一状态树，因此一个应用仅包含一个store实例，在一次数据请求并将其保存在store中后，其他组件即可调用使用，若有组件再次发起请求且向store提交，则会将两次请求得到的结果合并。</p>
<p>vuex有分为四层的结构。数据在四个层中单向流动。祭出流程图一张。。<img src="/uploads/2018-7-6.png" alt="2018-7-6"></p>
<p>vue components中通过dispatch触发action中的异步方法，action将异步方法的结果commit提交给mutation，mutation的变化会触发状态的改变，由此触发vue components视图的更新。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">"vue"</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">"vuex"</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">	state:&#123;</span><br><span class="line">		dcplan:[],</span><br><span class="line">		collected:[],</span><br><span class="line">		interesting:[],</span><br><span class="line">		finished:[],</span><br><span class="line">		rest:[]</span><br><span class="line">	&#125;,</span><br><span class="line">	actions:&#123;</span><br><span class="line">		getdcplan(store)&#123;</span><br><span class="line">			axios.get(<span class="string">'/api/longterm/projects'</span>).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">				store.commit(<span class="string">'getdcplan'</span>,res.data.longterm);</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	mutations:&#123;</span><br><span class="line">		getdcplan(state,payload)&#123;</span><br><span class="line">			state.dcplan = payload;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> payload)&#123;</span><br><span class="line">				<span class="keyword">switch</span>(payload[i].status)&#123;</span><br><span class="line">					<span class="keyword">case</span> <span class="string">'collected'</span>:</span><br><span class="line">						state.collected.push(payload[i]);</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					<span class="keyword">case</span> <span class="string">'interesting'</span>:</span><br><span class="line">						state.interesting.push(payload[i]);</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					<span class="keyword">case</span> <span class="string">'finished'</span>:</span><br><span class="line">						state.finished.push(payload[i]);</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					<span class="keyword">default</span>:</span><br><span class="line">						state.rest.push(payload[i]);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>
<p>在store模块中，创建了全局的vuex.Store实例，在这个实例中放置vuex流程图中的三个节点 – state、actions、mutations。</p>
<ul>
<li>state中记录保存在Store状态树中的变量，被state记录后，应用中的各组件才能访问。</li>
<li>mutations是调试时的主要参考。要改变state中的状态，只能通过向mutation提交，这样保证了每一次数据的更改都能被mutation记录，方便调试追踪。同时为了满足调试时捕捉状态更改次序和时机的需要，mutation必须是同步的，而action就没有此限制。</li>
<li>actions中声明请求数据，回调函数等异步方法，可以看到actions中的方法在请求回数据后，会commit到mutations中去。action不能直接更改状态。</li>
</ul>
<h4 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a>App.vue</h4><p>App.vue是主组件，它为其他组件提供路由容器，是其他组件显示的基础。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;router-view&gt;<span class="xml"><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> explore <span class="keyword">from</span> <span class="string">'./components/explore'</span></span><br><span class="line"><span class="keyword">import</span> dcplan <span class="keyword">from</span> <span class="string">'./components/dcplan'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'App'</span>,</span><br><span class="line">  components:&#123;</span><br><span class="line">  	explore,</span><br><span class="line">    dcplan</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style lang="scss" scoped&gt;</span></span><br><span class="line"><span class="regexp">	</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>
<h4 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h4><p>main.js是项目模块的入口，Vue实例在这里创建，同时也在这里引入注册项目需要的组件（router、vuex、第三方UI库等等）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The Vue build version to load with the `import` command</span></span><br><span class="line"><span class="comment">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Mint <span class="keyword">from</span> <span class="string">'mint-ui'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'mint-ui/lib/style.css'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Mint);</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Swipe, SwipeItem &#125; <span class="keyword">from</span> <span class="string">'mint-ui'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Swipe);</span><br><span class="line">Vue.use(SwipeItem)</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="static"><a href="#static" class="headerlink" title="static"></a>static</h3><p>放置静态文件的文件夹，iconfont字体什么的塞进去。git会忽略空文件夹，为了防止它被忽略，给它里面放了一个.gitkeep文件。。</p>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><p>项目页面。里面放了一个div。</p>
<p><code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code></p>
<p>main.js会将实例化后的Vue对象挂载在这个div上，main.js引入的子组件App.vue又将其他子组件通过路由的方法引入App.vue中的路由容器中，最终把路由到的组件显示在页面上。</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href="javascript:void(0)" class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/前端/">前端</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/学习笔记/">学习笔记</a>, <a href="/tags/Vue/">Vue</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-07-02T12:50:36.000Z"><a href="/2018/07/02/部分面试题浅析/">2018-07-02</a></time>
      
      
  
    <h1 class="title"><a href="/2018/07/02/部分面试题浅析/">部分面试题浅析</a></h1>
  

    </header>
    <div class="entry">
      
        <p>&emsp;&emsp;几道有意思的js面试题，由于水平所限，欢迎拍砖指正。</p>
<h3 id="控制台输出结果"><a href="#控制台输出结果" class="headerlink" title="控制台输出结果"></a>控制台输出结果</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'x'</span> <span class="keyword">in</span> <span class="built_in">window</span>);   <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p>&emsp;&emsp;in操作符判断属性是否在对象中，并返回一个布尔值。由于变量存在声明提升，因此 var x 会提升到执行环境顶端执行，全局变量会被挂载到 window 对象上，因此 in 操作符返回布尔值true。</p>
<h3 id="分析执行结果"><a href="#分析执行结果" class="headerlink" title="分析执行结果"></a>分析执行结果</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;                      <span class="comment">// A</span></span><br><span class="line">	getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		alert(<span class="string">'1'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">Foo.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;          <span class="comment">// B</span></span><br><span class="line">	alert(<span class="string">'2'</span>);</span><br><span class="line">&#125;</span><br><span class="line">Foo.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">// C</span></span><br><span class="line">	alert(<span class="string">'3'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;            <span class="comment">// D</span></span><br><span class="line">	alert(<span class="string">'4'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;                  <span class="comment">// E</span></span><br><span class="line">	alert(<span class="string">'5'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Foo.getName();             <span class="comment">// 2</span></span><br><span class="line">getName();                 <span class="comment">// 4</span></span><br><span class="line">Foo().getName();           <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">new</span> Foo.getName();         <span class="comment">// 2</span></span><br><span class="line"><span class="keyword">new</span> Foo().getName();       <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">new</span> <span class="keyword">new</span> Foo().getName;     <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<h4 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h4><h5 id="Foo-getName"><a href="#Foo-getName" class="headerlink" title="Foo.getName()"></a>Foo.getName()</h5><p>&emsp;&emsp;函数是对象，在B处，将一个getName方法当作静态属性挂载到Foo对象中，因此Foo.getName将直接访问这个静态属性，得2。</p>
<h5 id="getName"><a href="#getName" class="headerlink" title="getName()"></a>getName()</h5><p>&emsp;&emsp;函数声明提升和变量覆盖问题。在这段程序进入执行时，函数声明会率先提升到执行环境的顶端，即E部分首先被执行，getName函数的函数名（一个变量）保存对E函数的引用，随后程序又在 D 处通过函数字面量的方式对getName重新赋予对D函数的引用。因此当程序执行完毕时，getName中保存的是对D函数的引用，因此输出4。</p>
<h5 id="Foo-getName-1"><a href="#Foo-getName-1" class="headerlink" title="Foo().getName()"></a>Foo().getName()</h5><p>&emsp;&emsp;变量声明方式和变量覆盖问题。在 A 处Foo()中，未通过var关键字直接声明了一个函数getName，因此这是一个全局的变量，所以Foo()一经执行，其中声明的getName将覆盖原有的getName变量。在全局环境中执行的Foo函数中return的this仍是window对象，window对象此时再调用getName函数时，取到的是已经被Foo函数中声明getName变量覆盖的引用，因此输出1。</p>
<h5 id="new-Foo-getName"><a href="#new-Foo-getName" class="headerlink" title="new Foo.getName()"></a>new Foo.getName()</h5><p>&emsp;&emsp;按我的理解，这里是把Foo.getName当作构造函数执行了。实例化了一个空对象但是里面什么也没有，Foo.getName()执行得到2。</p>
<h5 id="new-Foo-getName-1"><a href="#new-Foo-getName-1" class="headerlink" title="new Foo().getName()"></a>new Foo().getName()</h5><p>&emsp;&emsp;原型继承。先把Foo函数当作构造函数执行，Foo()中的return this 指向构造出的实例化对象，返回的对象又继承了Foo.prototype中保存的原型方法，因此输出3。</p>
<h5 id="new-new-Foo-getName"><a href="#new-new-Foo-getName" class="headerlink" title="new new Foo().getName"></a>new new Foo().getName</h5><p>&emsp;&emsp;拆成 new（new Foo().getName）这么来看。new Foo().getName和上面一题 new Foo().getName() 的区别是getName没执行，因此这一步里new Foo().getName创建出了一个带有Foo原型的对象并返回了这个对象从Foo继承而来的的getName方法，对这个函数再进行new操作，和之前类似的，这个对象从Foo继承而来的的getName方法执行了一次，创建出一个空的对象。因此输出3。</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href="javascript:void(0)" class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/前端/">前端</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/面试笔记/">面试笔记</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






<nav id="pagination">
  
  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/前端/">前端</a><small>17</small></li>
  
    <li><a href="/categories/博客/">博客</a><small>1</small></li>
  
    <li><a href="/categories/服务器/">服务器</a><small>2</small></li>
  
    <li><a href="/categories/随笔/">随笔</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2018/12/22/一点感想/">一点感想</a>
      </li>
    
      <li>
        <a href="/2018/12/18/前端导出数据到excel文件/">前端导出数据到excel文件</a>
      </li>
    
      <li>
        <a href="/2018/12/18/LeeTCode两数相加/">LeeTCode两数相加</a>
      </li>
    
      <li>
        <a href="/2018/11/17/2018-11-杂记/">2018-11-杂记</a>
      </li>
    
      <li>
        <a href="/2018/10/27/2018-10-第四周读书笔记/">2018/10第四周杂记</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/JavaScript设计模式与开发实践/">JavaScript设计模式与开发实践</a><small>2</small></li>
  
    <li><a href="/tags/NodeJS/">NodeJS</a><small>1</small></li>
  
    <li><a href="/tags/React/">React</a><small>1</small></li>
  
    <li><a href="/tags/Vue/">Vue</a><small>1</small></li>
  
    <li><a href="/tags/jQuery/">jQuery</a><small>1</small></li>
  
    <li><a href="/tags/代码整洁之道/">代码整洁之道</a><small>1</small></li>
  
    <li><a href="/tags/学习笔记/">学习笔记</a><small>15</small></li>
  
    <li><a href="/tags/瞎折腾/">瞎折腾</a><small>3</small></li>
  
    <li><a href="/tags/随笔/">随笔</a><small>1</small></li>
  
    <li><a href="/tags/面试笔记/">面试笔记</a><small>2</small></li>
  
    <li><a href="/tags/首刷javascript高级程序设计/">首刷javascript高级程序设计</a><small>2</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">Tag Cloud</h3>
  <div class="entry">
    <a href="/tags/JavaScript设计模式与开发实践/" style="font-size: 13.33px;">JavaScript设计模式与开发实践</a> <a href="/tags/NodeJS/" style="font-size: 10px;">NodeJS</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/代码整洁之道/" style="font-size: 10px;">代码整洁之道</a> <a href="/tags/学习笔记/" style="font-size: 20px;">学习笔记</a> <a href="/tags/瞎折腾/" style="font-size: 16.67px;">瞎折腾</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a> <a href="/tags/面试笔记/" style="font-size: 13.33px;">面试笔记</a> <a href="/tags/首刷javascript高级程序设计/" style="font-size: 13.33px;">首刷javascript高级程序设计</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  <p>
  
  &copy; 2018 xcola
  
  All rights reserved.</p>
  <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</div>
<div class="clearfix"></div>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id="bg"></div>
</body>
</html>